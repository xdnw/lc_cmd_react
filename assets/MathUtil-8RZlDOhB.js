function N(t){const r=[];for(let e=0;e<t[0].length;e++)r.push([t[0][e],...t.slice(1).map(n=>n[e])]);return r}const i=t=>Object.is(t,-0)?"-0":t,a={"+":{func:(t,r)=>`${i(Number(t)+Number(r))}`,precedence:1,associativity:"left",arity:2},"-":{func:(t,r)=>`${i(Number(t)-Number(r))}`,precedence:1,associativity:"left",arity:2},"*":{func:(t,r)=>`${i(Number(t)*Number(r))}`,precedence:2,associativity:"left",arity:2},"/":{func:(t,r)=>`${i(Number(t)/Number(r))}`,precedence:2,associativity:"left",arity:2},"%":{func:(t,r)=>`${i(Number(t)%Number(r))}`,precedence:2,associativity:"left",arity:2},"^":{func:(t,r)=>`${i(Math.pow(Number(t),Number(r)))}`,precedence:3,associativity:"right",arity:2}},h=Object.keys(a),m={min:{func:(t,r)=>`${i(Math.min(Number(t),Number(r)))}`,arity:2},max:{func:(t,r)=>`${i(Math.max(Number(t),Number(r)))}`,arity:2},sin:{func:t=>`${i(Math.sin(Number(t)))}`,arity:1},cos:{func:t=>`${i(Math.cos(Number(t)))}`,arity:1},tan:{func:t=>`${i(Math.tan(Number(t)))}`,arity:1},log:{func:t=>`${Math.log(Number(t))}`,arity:1}},d=Object.keys(m),o=t=>t[t.length-1];function w(t){const r=new Array,e=new Array;for(const n of t)if(m[n]!==void 0)e.push(n);else if(n===","){for(;e.length>0&&o(e)!=="(";)r.push(e.pop());if(e.length===0)throw new Error("Misplaced ','")}else if(a[n]!==void 0){const c=n;for(;e.length>0&&o(e)!==void 0&&o(e)!=="("&&(a[o(e)].precedence>a[c].precedence||a[c].precedence===a[o(e)].precedence&&a[c].associativity==="left");)r.push(e.pop());e.push(c)}else if(n==="(")e.push(n);else if(n===")"){for(;e.length>0&&o(e)!=="(";)r.push(e.pop());if(e.length>0&&o(e)==="(")e.pop();else throw new Error("Parentheses mismatch");m[o(e)]!==void 0&&r.push(e.pop())}else r.push(n);for(;e.length>0;){if(o(e)==="(")throw new Error("Parentheses mismatch");r.push(e.pop())}return r}function y(t){const r=new Array,e={...a,...m};for(const n of t){const c=e[n];if(c!==void 0){const u=[];for(let s=0;s<c.arity;s++)u.push(r.pop());r.push(c.func(...u.slice().reverse()))}else r.push(n)}if(r.length>1)throw new Error("Insufficient operators");return Number(r[0])}function $(t){const r=t.replace(/\s+/g," "),e=[];let n="",c="";for(let u=0;u<r.length;u++){const s=r.charAt(u),b=r.charAt(u-1),l=r.charAt(u+1),p=o(e),f=c!=="";if(/\d/.test(s)||(s==="+"||s==="-")&&!f&&(p===void 0||p===","||p==="("||h.includes(p))&&/\d/.test(l))c+=s;else if(s==="."){if(f&&c.includes("."))throw new Error(`Double '.' in number: '${c}${s}'`);c+=s}else if(s===" "){if(/\d/.test(b)&&/\d/.test(l))throw new Error(`Space in number: '${c}${s}${l}'`)}else if(d.includes(n+s))n+=s,d.includes(n+l)||(e.push(n),n="");else if(h.includes(s)||s==="("||s===")"||s===","){if(h.includes(s)&&!f&&h.includes(p))throw new Error(`Consecutive operators: '${p}${s}'`);f&&e.push(c),e.push(s),c=""}else n+=s}if(n!=="")throw new Error(`Invalid characters: '${n}'`);return c!==""&&e.push(c),(e[0]==="+"||e[0]==="-")&&e.unshift("0"),e}function g(t){const r=t.replace(/(\d)k(?!\w)/gi,"$1*1000").replace(/(\d)m(?!\w)/gi,"$1*1000000").replace(/(\d)b(?!\w)/gi,"$1*1000000000").replace(/(\d)t(?!\w)/gi,"$1*1000000000000"),e=$(r),n=w(e);return y(n)}export{g as c,N as i};
