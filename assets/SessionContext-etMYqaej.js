import{r as e,j as r,u as s}from"./index-CB60MK8B.js";import{b as n,S as o}from"./loading-Cq9Kwdp4.js";import{u as t}from"./useQuery-zqD4DT95.js";const a=e.createContext(void 0),i=({children:i})=>{const u=(()=>{const[r,a]=e.useState(null),[i,u]=e.useState(null),l=s(),{data:d,error:c,refetch:m}=t(n(o.endpoint,{}));return{session:r||(null==d?void 0:d.data)||null,error:null!==i?i:c instanceof Error?c.message:null,setSession:e=>{a(e)},setError:e=>{u(e)},refetchSession:e.useCallback((()=>{l.removeQueries({queryKey:[o.endpoint.name]}),m()}),[l,m])}})();return r.jsx(r.Fragment,{children:r.jsx(a.Provider,{value:u,children:i})})},u=()=>{const r=e.useContext(a);if(!r)throw new Error("useSession must be used within a SessionProvider");return r};export{i as S,u};
