import{a as e,j as t,L as a}from"./index-uWr0STWh.js";import{j as i,T as s,L as n,l as r,v as l,w as o}from"./endpoints-BPDCTD20.js";import{B as d}from"./button-DTAShytH.js";import{C as c,n as m}from"./table_util-BJ0rXBQH.js";import{T as u,L as p}from"./timestamp-xgYWN7Wu.js";import{StaticViewGraph as g}from"./view_graph-ucYPlEOl.js";import{ViewCommand as h}from"./view_command-BKjKqBK5.js";import{e as x}from"./copytoclipboard-UkvaOJdx.js";import{E as v}from"./bulkwrapper-C7Dd7l_Q.js";import"./SimpleChart-Dg6HspYI.js";import"./theme-provider-BB8tQX17.js";import"./edit_graph-Dl62mdTo.js";import"./apiform-D1Z__66P.js";import"./StateUtil-C_yAFdwf.js";import"./MarkupRenderer-CMvvhcQ7.js";import"./loading-Bn1uMh6d.js";import"./input-wic93AKX.js";import"./useQuery-DxtgaVyX.js";import"./index--GFR_svE.js";import"./CmdList-DxSngDBu.js";import"./useSuspenseQuery-20P0wUd1.js";const j=i.placeholders("DBAlliance").aliased().add({cmd:"getname",alias:"name"}).add({cmd:"getid",alias:"id"}).add({cmd:"getacronym",alias:"acronym"}).add({cmd:"getflag",alias:"flag"}).add({cmd:"getforum_link",alias:"forumLink"}).add({cmd:"getdiscord_link",alias:"discordLink"}).add({cmd:"getwiki_link",alias:"wikiLink"}).add({cmd:"getdatecreated",alias:"dateCreated"}).add({cmd:"getcolor",alias:"color"}).add({cmd:"getscore",alias:"score"}).add({cmd:"getestimatedstockpilevalue",alias:"stockpileValue"}).add({cmd:"getestimatedstockpile",alias:"stockpile"}).add({cmd:"getlootvalue",args:{score:"1"},alias:"lootValue"}).add({cmd:"getrevenueconverted",alias:"revenue"}).add({cmd:"getcostconverted",alias:"cost"}).add({cmd:"countmembers",alias:"memberCount"}).add({cmd:"countnations",args:{filter:"#position=1"},alias:"applicantCount"}).add({cmd:"countnations",args:{filter:"#isTaxable"},alias:"taxableCount"}).add({cmd:"getnumtreasures",alias:"treasures"}).add({cmd:"countnations",args:{filter:"#color=gray,#vm_turns=0"},alias:"grayCount"}).add({cmd:"countnations",args:{filter:"#color=gray,#vm_turns=0,#active_m<7200"},alias:"activeGrayCount"}).add({cmd:"countnations",args:{filter:"#cities<10,#FreeOffensiveSlots>0,(#color!=beige|#isblockaded=0)"},alias:"c10WithoutRaids"}).add({cmd:"getcities",alias:"cities"}).add({cmd:"gettotal",args:{attribute:"cityvalue",filter:"#position>1,#vm_turns=0"},alias:"cityValue"}),b=[{id:"created",label:"Created",value:e=>t.jsx(u,{millis:e.dateCreated})},{id:"color",label:"Color",value:e=>t.jsxs("div",{className:"flex items-center",children:[t.jsx(c,{colorId:e.color}),t.jsx("span",{children:e.color})]})},{id:"rank",label:"Rank",value:()=>"TODO"},{id:"score",label:"Score",value:e=>t.jsxs(p,{className:"underline",content:t.jsxs(t.Fragment,{children:[t.jsx(h,{command:["alliance","stats","attribute_ranking"],args:{attribute:"{score}",num_results:"5",highlight:e.id+""}}),t.jsx(g,{endpoint:l,args:{metric:"score",alliances:"aa:"+e.id,start:"timestamp:"+e.dateCreated}})]}),children:[r(e.score),"ns"]})},{id:"stockpileValue",label:"Estimated Stockpile Value",value:e=>t.jsxs(p,{className:"underline",content:t.jsxs(t.Fragment,{children:[t.jsx(h,{command:["alliance","stats","attribute_ranking"],args:{attribute:"{getestimatedstockpilevalue}",num_results:"5",highlight:e.id+""}}),t.jsx(x,{text:m(e.stockpileValue)})]}),children:["$",r(e.stockpileValue)]})},{id:"lootValue",label:"Loot Per Score",value:e=>t.jsxs(p,{className:"underline",content:t.jsxs(t.Fragment,{children:[t.jsx(h,{command:["alliance","stats","loot_ranking"],args:{time:"30d",num_results:"5",highlight:"AA:"+e.id}}),t.jsx("hr",{}),"Alliance Loot Losses:",t.jsx(h,{command:["stats_war","warcostranking"],args:{timeStart:"30d",type:"ATTACKER_LOSSES",allowedAttacks:"A_LOOT",groupByAlliance:"true",num_results:"5",highlight:"AA:"+e.id}})]}),children:["$",r(e.lootValue)]})},{id:"revenue",label:"Revenue Converted",value:e=>t.jsxs(p,{className:"underline",content:t.jsxs(t.Fragment,{children:[t.jsx(h,{command:["trade","findproducer"],args:{resources:"*",includeNegative:"true",num_results:"5",highlight:e.id+""}}),t.jsx(g,{endpoint:o,args:{metrics:"revenue",coalition:"aa:"+e.id,start:"timestamp:"+e.dateCreated,end:"0"}}),t.jsx(h,{command:["alliance","revenue"],args:{nations:"AA:"+e.id}})]}),children:["$",r(e.revenue)]})},{id:"cost",label:"Alliance Value",value:e=>t.jsxs(p,{className:"underline",content:t.jsx(t.Fragment,{children:t.jsx(h,{command:["alliance","cost"],args:{nations:"AA:"+e.id}})}),children:["$",r(e.cost)]})},{id:"gray",label:"Gray (non VM)",buttons:[{text:e=>`${e.grayCount} All`,path:e=>`/nations/AA:${e.id},#color=gray,#vm_turns=0`},{text:e=>`${e.activeGrayCount} Active (5d)`,path:e=>`/nations/AA:${e.id},#color=gray,#vm_turns=0,#active_m<7200`}]},{id:"c10WithoutRaids",label:"&#91;C10 without raids",buttons:[{text:e=>`${e.c10WithoutRaids} Nations`,path:e=>`/nations/AA:${e.id},#cities<10,#FreeOffensiveSlots>0,(#color!=beige|#isblockaded=0)`}]},{id:"treasures",label:"Treasures",value:e=>t.jsxs(p,{className:"underline",content:t.jsxs(t.Fragment,{children:[t.jsx(h,{command:["alliance","stats","attribute_ranking"],args:{attribute:"{numtreasures}",num_results:"5",highlight:e.id+""}}),t.jsx(g,{endpoint:l,args:{metric:"treasures",alliances:"aa:"+e.id,start:"timestamp:"+e.dateCreated}})]}),children:[r(e.treasures)," (",Math.sqrt(4*e.treasures).toFixed(2),"%)"]}),buttons:[{text:()=>"View",path:e=>`/treasures/AA:${e.id},#treasure`,condition:e=>e.treasures>=0}]},{id:"cities",label:"Cities",value:e=>t.jsxs(p,{className:"underline",content:t.jsxs(t.Fragment,{children:[t.jsx(h,{command:["alliance","stats","attribute_ranking"],args:{attribute:"{numcities}",num_results:"5",highlight:e.id+""}}),t.jsx(g,{endpoint:l,args:{metric:"cities",alliances:"aa:"+e.id,start:"timestamp:"+e.dateCreated}})]}),children:[r(e.cities)," ($",r(4*e.cities),")"]}),buttons:[{text:()=>"View",path:e=>`/cities/AA:${e.id},#cities`,condition:e=>e.cities>=0}]},{id:"avgInfra",label:"Avg Infra",value:()=>"TODO avg infra + infra value\nTODO infra by tier\nTODO avg infra over time"},{id:"avgLand",label:"Avg Land",value:()=>"TODO avg land + land value\nTODO land by tier\nTODO avg land over time"},{id:"mmr",label:"MMR",value:()=>"TODO (non tooltip) unit= | build=\nTODO MMR over time + MMR tier graph"},{id:"soldierPercent",label:"Soldier %",value:()=>"TODO unit tier graph, unit over time"},{id:"tankPercent",label:"Tank %",value:()=>"TODO unit tier graph, unit over time"},{id:"aircraftPercent",label:"Aircraft %",value:()=>"TODO unit tier graph, unit over time"},{id:"shipsPercent",label:"Ships %",value:()=>"TODO unit tier graph, unit over time"},{id:"missiles",label:"Missiles",value:()=>"TODO num missiles (... avg)\nTODO MLP tier graph\nTODO missiles over time\nTODO ranking"},{id:"nukes",label:"Nukes",value:()=>"TODO num nukes (... avg)\nTODO nuke tier graph\nTODO NRF tier graph\nTODO nuke over time\nTODO ranking"},{id:"spies",label:"Spies",value:()=>"TODO Spy tier graph\nTODO avg spies over time"},{id:"activeWars",label:"Active Wars",value:()=>"TODO Off: 5, Def: 5 (10 Total)\nTODO Wars by tier\nTODO strength tier graph"}],f=[{text:()=>"Forum",path:e=>e.forumLink,condition:e=>!!e.forumLink},{text:()=>"Discord",path:e=>e.discordLink,condition:e=>!!e.discordLink},{text:()=>"Wiki",path:e=>e.wikiLink,condition:e=>!!e.wikiLink},{text:e=>`${e.memberCount} Members`,path:e=>`/nations/AA:${e.id},#position>1`,condition:e=>e.memberCount>0},{text:e=>`${e.taxableCount} Taxable`,path:e=>`/nations/AA:${e.id},#isTaxable`,condition:e=>e.taxableCount>0},{text:e=>`${e.applicantCount} Applicants`,path:e=>`/nations/AA:${e.id},#position=1`,condition:e=>e.applicantCount>0}];function O(){const{alliance:i}=e();return t.jsx(v,{endpoint:s,args:{type:"Alliance",selection_str:i,columns:j.array()},children:({data:e})=>{if(2!=e.cells.length)return t.jsx(t.Fragment,{children:JSON.stringify(e)});const i=j.createRowAdapter(e.cells[1]);return t.jsx(t.Fragment,{children:t.jsxs("table",{className:"display text-xs compact font-mono dataTable",children:[t.jsxs("thead",{children:[t.jsx("tr",{children:t.jsx("div",{className:"mt-1 flex flex-wrap gap-1 justify-start",children:f.map(((e,s)=>{if(e.condition&&!e.condition(i))return null;const n="function"==typeof e.text?e.text(i):e.text;return t.jsx(d,{variant:"outline",size:"sm",asChild:!0,children:t.jsx(a,{to:e.path(i),children:n})},s)}))})}),t.jsx("tr",{children:t.jsx("th",{colSpan:2,children:t.jsxs("div",{className:"flex items-center space-x-2",children:[i.flag&&t.jsx("img",{src:i.flag,alt:"Alliance flag",className:"w-16 h-10"}),t.jsxs(a,{className:"text-2xl font-bolt flex items-center",to:(s=`alliance/id=${i.id}`,`https://politicsandwar.com/${s}`),children:[i.name," ",t.jsx(n,{name:"ExternalLink"})]}),i.acronym&&t.jsxs("span",{className:"text-sm text-gray-500",children:["(",i.acronym,")"]})]})})})]}),t.jsx("tbody",{children:b.map((e=>e.condition&&!e.condition(i)?null:t.jsxs("tr",{children:[t.jsx("td",{className:"p-1",children:e.label}),t.jsxs("td",{className:"p-1 flex items-center",children:[e.value&&e.value(i),e.buttons&&e.buttons.map(((e,s)=>{if(e.condition&&!e.condition(i))return null;const n="function"==typeof e.text?e.text(i):e.text;return t.jsx(d,{className:s>0?"ms-1":"",variant:"outline",size:"sm",asChild:!0,children:t.jsx(a,{to:e.path(i),children:n})},s)}))]})]},e.id)))})]})});var s}})}function k(){return t.jsx("div",{children:"This is the text in the tooltip, that is rendered lazily"})}export{k as ExampleContent,O as default};
