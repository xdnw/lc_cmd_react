import{r as e,j as s,L as t}from"./index-Bs_rCQt5.js";import{B as i}from"./button-BKq8Oatj.js";import{L as n,c as l,d as o}from"./loading-BvX06E4j.js";import{u as r}from"./DialogContext-DNjxjY9_.js";import{u as a}from"./SessionContext-1Fz0k1Cj.js";import{A as d}from"./apiform-DLhR_nN4.js";import"./useQuery-DFKsDxU8.js";import"./StateUtil-CczZaSnY.js";import"./bulkwrapper-Cq7hxof8.js";import"./useSuspenseQuery-C1sZuhyO.js";import"./CommandComponent-NHjZmTrP.js";import"./input-Joq3MBUR.js";import"./SimpleChart-D6vo8Wbn.js";import"./theme-provider-DEDhC0gG.js";import"./table_util-DHwWTPFN.js";const c=()=>{const{session:l,error:o,setSession:d,refetchSession:c}=a(),{showDialog:h}=r(),p=e.useCallback((e=>{c(),h("Guild Set",s.jsxs("div",{className:"flex items-center",children:[s.jsx("img",{src:e.icon,alt:"Guild Icon",className:"w-8 h-8 mr-2"}),s.jsxs("span",{children:["Selected guild with id ",e.id," and name ",e.name]})]}),!1)}),[c,h]);return s.jsxs(s.Fragment,{children:[s.jsx(i,{variant:"outline",size:"sm",asChild:!0,children:s.jsxs(t,{to:"/home",children:[s.jsx(n,{name:"ChevronLeft",className:"h-4 w-4"}),"Home"]})}),s.jsxs("div",{className:"bg-light/10 border border-light/10 p-2 m-0 mt-2",children:[(null==l?void 0:l.guild)&&s.jsx(u,{id:l.guild,name:l.guild_name,icon:l.guild_icon}),s.jsxs("div",{className:"bg-accent p-2 rounded relative",children:[s.jsx("h1",{className:"text-lg font-bold",children:"Don't see your server here? "}),s.jsxs(t,{className:"text-blue-600 hover:text-blue-800 underline",to:"https://discord.com/api/oauth2/authorize?client_id=672237266940198960&permissions=395606879321&scope=bot",children:["Invite ","Locutus"]})," to your server, then see the ",s.jsx(t,{className:"text-blue-600 hover:text-blue-800 underline",to:"https://github.com/xdnw/locutus/wiki/initial_setup",children:"Wiki"})," for installation instructions."]}),s.jsx("hr",{className:"my-2"}),s.jsx(m,{handleResponse:p})]})]})},m=({handleResponse:t})=>{const i=e.useCallback((({data:e})=>{t(e)}),[t]);return s.jsx(d,{endpoint:l,message:s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"text-lg font-extrabold",children:"Guild Select:"}),s.jsxs("p",{children:["Select your guild using the dropdown below, then press the ",s.jsx("kbd",{children:"Submit"})," button",s.jsx("br",{})]})]}),handle_response:i})},u=e.memo((({id:e,name:t,icon:i})=>s.jsx(h,{id:e,name:t,icon:i}))),h=e.memo((({id:t,name:n,icon:l})=>{const{refetchSession:d}=a(),{showDialog:c}=r(),m=e.useCallback((()=>{o.endpoint.call({}).then((()=>{d(),c("Guild Unset","Successfully unset guild")})).catch((e=>{c("Failed to unset guild",e+"")}))}),[d,c]);return s.jsx(s.Fragment,{children:t&&s.jsxs("div",{className:"bg-accent p-2 relative rounded",children:[s.jsx("h1",{className:"text-lg font-bold",children:"Currently Selected"}),s.jsxs("p",{className:"pb-1",children:[l&&s.jsx("img",{src:l,alt:n,className:"w-4 h-4 inline-block mr-1"}),n?n+" | ":"",t||"N/A"]}),s.jsx(i,{onClick:m,variant:"outline",size:"sm",className:"border-slate-600 absolute top-2 right-2",children:"Remove"})]})})}));export{c as default};
