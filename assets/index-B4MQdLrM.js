import{c as x,j as s,r as j,L as b}from"./index-SOjtd1du.js";import{B as g}from"./button-C6_F57E5.js";import{L as N,a as v,c as y}from"./queries-BzWnpVnq.js";import{u as S}from"./DialogContext-DiRAa5qs.js";import{u as _}from"./SessionContext-v1NsAMUy.js";import{A as G}from"./apiform-Cou0YBqx.js";import"./command-utils-BF18nFEX.js";import"./command-meta-Dt1HocaT.js";import"./useQuery-CCK4RCGX.js";import"./StateUtil-D0CNNC7k.js";import"./bulkwrapper-CSppeL3K.js";import"./useSuspenseQuery-7uza5ut4.js";import"./CommandComponent-Bi1lNJuB.js";import"./input-DGDhAddh.js";import"./SimpleChart-V9M2bt1B.js";import"./dropdown-menu-B_MP3PX6.js";import"./theme-provider-BQwJ-LrG.js";import"./table_util-BV1C7Yj5.js";import"./traditional-hdCCIUos.js";const O=()=>{const t=x.c(15),{session:e,refetchSession:i}=_(),{showDialog:l}=S();let o;t[0]!==i||t[1]!==l?(o=f=>{i(),l("Guild Set",s.jsxs("div",{className:"flex items-center",children:[s.jsx("img",{src:f.icon,alt:"Guild Icon",className:"w-8 h-8 mr-2"}),s.jsxs("span",{children:["Selected guild with id ",f.id," and name ",f.name]})]}),!1)},t[0]=i,t[1]=l,t[2]=o):o=t[2];const n=o;let c;t[3]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx(g,{variant:"outline",size:"sm",asChild:!0,children:s.jsxs(b,{to:"/home",children:[s.jsx(N,{name:"ChevronLeft",className:"h-4 w-4"}),"Home"]})}),t[3]=c):c=t[3];let r;t[4]!==e?(r=e?.guild&&s.jsx(k,{id:e.guild,name:e.guild_name,icon:e.guild_icon}),t[4]=e,t[5]=r):r=t[5];let a,m;t[6]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx("h1",{className:"text-lg font-bold",children:"Don't see your server here? "}),m=s.jsxs(b,{className:"text-blue-600 hover:text-blue-800 underline",to:"https://discord.com/api/oauth2/authorize?client_id=672237266940198960&permissions=395606879321&scope=bot",children:["Invite ","Locutus"]}),t[6]=a,t[7]=m):(a=t[6],m=t[7]);let d,h;t[8]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsxs("div",{className:"bg-accent p-2 rounded relative",children:[a,m," to your server, then see the ",s.jsx(b,{className:"text-blue-600 hover:text-blue-800 underline",to:"https://github.com/xdnw/locutus/wiki/initial_setup",children:"Wiki"})," for installation instructions."]}),h=s.jsx("hr",{className:"my-2"}),t[8]=d,t[9]=h):(d=t[8],h=t[9]);let u;t[10]!==n?(u=s.jsx(w,{handleResponse:n}),t[10]=n,t[11]=u):u=t[11];let p;return t[12]!==r||t[13]!==u?(p=s.jsxs(s.Fragment,{children:[c,s.jsxs("div",{className:"bg-light/10 border border-light/10 p-2 m-0 mt-2",children:[r,d,h,u]})]}),t[12]=r,t[13]=u,t[14]=p):p=t[14],p},w=t=>{const e=x.c(7),{handleResponse:i}=t;let l;e[0]!==i?(l=m=>{const{data:d}=m;i(d)},e[0]=i,e[1]=l):l=e[1];const o=l;let n;e[2]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx("h2",{className:"text-lg font-extrabold",children:"Guild Select:"}),e[2]=n):n=e[2];let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx("kbd",{children:"Submit"}),e[3]=c):c=e[3];let r;e[4]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsxs(s.Fragment,{children:[n,s.jsxs("p",{children:["Select your guild using the dropdown below, then press the ",c," button",s.jsx("br",{})]})]}),e[4]=r):r=e[4];let a;return e[5]!==o?(a=s.jsx(G,{endpoint:v,message:r,handle_response:o}),e[5]=o,e[6]=a):a=e[6],a},k=j.memo(t=>{const e=x.c(4),{id:i,name:l,icon:o}=t;let n;return e[0]!==o||e[1]!==i||e[2]!==l?(n=s.jsx(L,{id:i,name:l,icon:o}),e[0]=o,e[1]=i,e[2]=l,e[3]=n):n=e[3],n}),L=j.memo(t=>{const e=x.c(10),{id:i,name:l,icon:o}=t,{refetchSession:n}=_(),{showDialog:c}=S();let r;e[0]!==n||e[1]!==c?(r=()=>{y.endpoint.call({}).then(()=>{n(),c("Guild Unset","Successfully unset guild")}).catch(h=>{c("Failed to unset guild",h+"")})},e[0]=n,e[1]=c,e[2]=r):r=e[2];const a=r;let m;e[3]!==o||e[4]!==i||e[5]!==l||e[6]!==a?(m=i&&s.jsxs("div",{className:"bg-accent p-2 relative rounded",children:[s.jsx("h1",{className:"text-lg font-bold",children:"Currently Selected"}),s.jsxs("p",{className:"pb-1",children:[o&&s.jsx("img",{src:o,alt:l,className:"w-4 h-4 inline-block mr-1"}),l?l+" | ":"",i||"N/A"]}),s.jsx(g,{onClick:a,variant:"outline",size:"sm",className:"border-slate-600 absolute top-2 right-2",children:"Remove"})]}),e[3]=o,e[4]=i,e[5]=l,e[6]=a,e[7]=m):m=e[7];let d;return e[8]!==m?(d=s.jsx(s.Fragment,{children:m}),e[8]=m,e[9]=d):d=e[9],d});export{O as default};
