import{j as e,a as s,d as t,r as o,u as r,e as a,L as n}from"./index-C3E2-SUH.js";import{B as i}from"./button-DCZsNPnk.js";import{S as l,p as u}from"./queries-BuM6HYrb.js";import{u as m,a as d}from"./DialogContext-BJx4vabV.js";import{E as c}from"./bulkwrapper-CffFvLGh.js";import{u as j}from"./SessionContext-Bay44Hsw.js";import"./useSuspenseQuery-DiLOpIi1.js";import"./loading-CI11-4Uh.js";import"./useQuery-Zg5Nvbp7.js";function g(){const{token:g}=s(),[p]=t(),f=p.get("guild"),{showDialog:x}=m(),{refetchSession:h}=j(),[y,k]=o.useState(!1),S=r();o.useEffect((()=>{y&&(a.set("lc_token_exists",Math.random().toString(36).substring(2)),S.removeQueries({queryKey:[l.endpoint.name]}),h())}),[y,h,S]);const b=o.useCallback((s=>{x("Login Failed",e.jsxs(e.Fragment,{children:["Failed to set login token. Please try again, try a different login method, or contact support.",e.jsx("div",{className:"relative overflow-auto",children:e.jsx(d,{text:s.message})})]}),!1)}),[x]),v=f?{token:g??"",guild_id:f}:{token:g??""};return e.jsx(c,{endpoint:u,args:v,handle_error:b,children:({data:s})=>(k(!0),e.jsxs(e.Fragment,{children:["Logged in Successfully!",e.jsx("br",{}),e.jsx(i,{variant:"outline",size:"sm",className:"border-slate-600",asChild:!0,children:e.jsx(n,{to:"/home",children:"Return Home"})})]}))})}function p(){return e.jsx(g,{})}export{g as LoginComponent,p as default};
