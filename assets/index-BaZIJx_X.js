import{j as e,r as s,u as t,e as r,L as o}from"./index-Bs_rCQt5.js";import{B as a}from"./button-BKq8Oatj.js";import{S as i,r as n}from"./loading-BvX06E4j.js";import{u as l,a as u}from"./DialogContext-DNjxjY9_.js";import{E as m}from"./bulkwrapper-Cq7hxof8.js";import{u as d}from"./SessionContext-1Fz0k1Cj.js";import"./useSuspenseQuery-C1sZuhyO.js";import"./useQuery-DFKsDxU8.js";function c(){const c=window.location.href.split("#")[0].split("?")[1]||"",j=new URLSearchParams(c).get("code"),{showDialog:p}=l(),{refetchSession:f}=d(),[h,g]=s.useState(!1),x=t();s.useEffect((()=>{h&&(r.set("lc_token_exists",Math.random().toString(36).substring(2)),x.removeQueries({queryKey:[i.endpoint.name]}),f())}),[h,f,x]);const y=s.useCallback((s=>{p("Login Failed",e.jsxs(e.Fragment,{children:["Failed to set login OAuth2 Code. Please try again, try a different login method, or contact support.",e.jsx("div",{className:"relative overflow-auto",children:e.jsx(u,{text:s.message})})]}),!1)}),[p]);return e.jsx(m,{endpoint:n,args:{code:j??""},handle_error:y,children:({data:s})=>(g(!0),e.jsxs(e.Fragment,{children:["Logged in Successfully via OAuth2!",e.jsx("br",{}),e.jsx(a,{variant:"outline",size:"sm",className:"border-slate-600",asChild:!0,children:e.jsx(o,{to:"/home",children:"Return Home"})})]}))})}function j(){return e.jsx(c,{})}export{c as OAuth2Component,j as default};
