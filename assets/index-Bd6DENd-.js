import{j as e,L as s,g as n,u as o,r}from"./index-C3E2-SUH.js";import{S as t}from"./session-B7k1B_Fn.js";import{B as i}from"./button-DCZsNPnk.js";import{u as a,C as d}from"./DialogContext-BJx4vabV.js";import{S as l,U as c}from"./queries-BuM6HYrb.js";import{E as u}from"./bulkwrapper-CffFvLGh.js";import{A as m}from"./apiform-BYdO01Da.js";import"./card-CumT0SDG.js";import"./useQuery-Zg5Nvbp7.js";import"./timestamp-ZCQVUB6Q.js";import"./useSuspenseQuery-DiLOpIi1.js";import"./loading-CI11-4Uh.js";import"./StateUtil-CGhFEjjS.js";import"./CommandComponent-H-FPWJ9S.js";import"./input-CXVReF6E.js";import"./SimpleChart-OHRi1aHe.js";import"./theme-provider-CY-pBUqn.js";import"./table_util-C8W_dWTS.js";function j(){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-light/10 border border-light/10 p-2 relative rounded mb-4",children:e.jsx(u,{endpoint:l,args:{},children:({data:s})=>e.jsx(x,{session:s})})}),e.jsx(t,{})]})}function x({session:o}){return o.nation&&o.user?o.registered?o.registered_nation??0===o.nation?e.jsx(p,{}):e.jsx(h,{session:o}):e.jsx(g,{}):e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"You are not registered"}),e.jsx(i,{variant:"outline",size:"sm",className:"border-slate-600",asChild:!0,children:e.jsx(s,{to:o.nation?n():"/nation_picker",children:o.nation?"Add Discord":"Add Nation"})})]})}function g(){const{showDialog:s}=a(),n=o(),t=r.useCallback((()=>{n.removeQueries({queryKey:[l.endpoint.name]}),s("Registered","Successfully registered your discord and nation.",!1)}),[n,s]);return e.jsx("div",{children:e.jsx(m,{endpoint:c,label:"Link Accounts",message:e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Link Accounts?"}),e.jsx("p",{children:"Your discord and nation accounts are not linked. Would you like to register them?"})]}),handle_response:t})})}function p(){const{showDialog:s}=a(),n=o(),t=r.useCallback((()=>{n.removeQueries({queryKey:[l.endpoint.name]}),s("Unregistered","Successfully unlinked your discord and nation. It is recommended to logout and log back in to register a new user or nation.",!1)}),[n,s]);return e.jsxs("div",{children:["return ",e.jsx(m,{endpoint:c,label:"Unlink Accounts",message:e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Already Registered"}),"You may unlink your nation from your discord user. It is recommended to logout and log back in to register a new user or nation."]}),handle_response:t})]})}function h({session:n}){const{showDialog:t}=a(),u=o(),j=r.useCallback((()=>{u.removeQueries({queryKey:[l.endpoint.name]}),t("Unregistered","Successfully unlinked your discord and nation. It is recommended to logout and log back in to register a new user or nation.",!1)}),[u,t]);return e.jsxs("div",{children:[e.jsx(m,{endpoint:c,label:"Unlink Accounts",message:e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Invalid Registration"}),e.jsxs("p",{children:["Your discord is registered to the nation ",e.jsx(d,{text:`${n.registered_nation}`}),"but you are logged in as ",e.jsx(d,{text:`${n.nation_name}/${n.nation}`})]}),e.jsx("p",{children:"It is recommended to either unlink your current accounts, or sign out and log back in with the correct accounts."})]}),handle_response:j}),e.jsx(i,{variant:"outline",size:"sm",className:"border-slate-600",asChild:!0,children:e.jsx(s,{to:"/logout",children:"Logout"})})]})}export{g as RegisterComponent,x as UnregisterComponent,h as UnregisterInvalid,p as UnregisterValid,j as default};
