import{j as e,a as s,d as t,r as o,u as r,e as a,L as n}from"./index-Bs_rCQt5.js";import{B as i}from"./button-BKq8Oatj.js";import{S as l,q as u}from"./loading-BvX06E4j.js";import{u as d,a as m}from"./DialogContext-DNjxjY9_.js";import{E as c}from"./bulkwrapper-Cq7hxof8.js";import{u as g}from"./SessionContext-1Fz0k1Cj.js";import"./useSuspenseQuery-C1sZuhyO.js";import"./useQuery-DFKsDxU8.js";function j(){const{token:j}=s(),[f]=t(),p=f.get("guild"),{showDialog:x}=d(),{refetchSession:h}=g(),[y,k]=o.useState(!1),S=r();o.useEffect((()=>{y&&(a.set("lc_token_exists",Math.random().toString(36).substring(2)),S.removeQueries({queryKey:[l.endpoint.name]}),h())}),[y,h,S]);const b=o.useCallback((s=>{x("Login Failed",e.jsxs(e.Fragment,{children:["Failed to set login token. Please try again, try a different login method, or contact support.",e.jsx("div",{className:"relative overflow-auto",children:e.jsx(m,{text:s.message})})]}),!1)}),[x]),v=p?{token:j??"",guild_id:p}:{token:j??""};return e.jsx(c,{endpoint:u,args:v,handle_error:b,children:({data:s})=>(k(!0),e.jsxs(e.Fragment,{children:["Logged in Successfully!",e.jsx("br",{}),e.jsx(i,{variant:"outline",size:"sm",className:"border-slate-600",asChild:!0,children:e.jsx(n,{to:"/home",children:"Return Home"})})]}))})}function f(){return e.jsx(j,{})}export{j as LoginComponent,f as default};
