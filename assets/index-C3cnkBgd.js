import{r as e,j as s,L as t}from"./index-uWr0STWh.js";import{B as i}from"./button-DTAShytH.js";import{L as r,g as n,h as l}from"./endpoints-BPDCTD20.js";import{u as o}from"./copytoclipboard-UkvaOJdx.js";import{u as a}from"./SessionContext-t80GUweO.js";import{A as d}from"./apiform-D1Z__66P.js";import"./useQuery-DxtgaVyX.js";import"./StateUtil-C_yAFdwf.js";import"./bulkwrapper-C7Dd7l_Q.js";import"./useSuspenseQuery-20P0wUd1.js";import"./loading-Bn1uMh6d.js";import"./MarkupRenderer-CMvvhcQ7.js";import"./SimpleChart-Dg6HspYI.js";import"./theme-provider-BB8tQX17.js";import"./input-wic93AKX.js";import"./table_util-BJ0rXBQH.js";const c=()=>{const{session:n,error:l,setSession:d,refetchSession:c}=a(),{showDialog:h}=o(),p=e.useCallback((e=>{c(),h("Guild Set",s.jsxs("div",{className:"flex items-center",children:[s.jsx("img",{src:e.icon,alt:"Guild Icon",className:"w-8 h-8 mr-2"}),s.jsxs("span",{children:["Selected guild with id ",e.id," and name ",e.name]})]}),!1)}),[c,h]);return s.jsxs(s.Fragment,{children:[s.jsx(i,{variant:"outline",size:"sm",asChild:!0,children:s.jsxs(t,{to:"/home",children:[s.jsx(r,{name:"ChevronLeft",className:"h-4 w-4"}),"Home"]})}),s.jsxs("div",{className:"bg-light/10 border border-light/10 p-2 m-0 mt-2",children:[(null==n?void 0:n.guild)&&s.jsx(u,{id:n.guild,name:n.guild_name,icon:n.guild_icon}),s.jsx(m,{handleResponse:p}),s.jsx("hr",{className:"my-2"}),s.jsxs("div",{className:"bg-accent p-2 rounded relative",children:[s.jsx("h1",{className:"text-lg font-bold",children:"Don't see your server here? "}),s.jsxs(t,{className:"text-blue-600 hover:text-blue-800 underline",to:"https://discord.com/api/oauth2/authorize?client_id=672237266940198960&permissions=395606879321&scope=bot",children:["Invite ","Locutus"]})," to your server, then see the ",s.jsx(t,{className:"text-blue-600 hover:text-blue-800 underline",to:"https://github.com/xdnw/locutus/wiki/initial_setup",children:"Wiki"})," for installation instructions."]})]})]})},m=({handleResponse:t})=>{const i=e.useCallback((({data:e})=>{t(e)}),[t]);return s.jsx(d,{endpoint:n,message:s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"text-lg font-extrabold",children:"Guild Select:"}),s.jsxs("p",{children:["Select your guild using the dropdown below, then press the ",s.jsx("kbd",{children:"Submit"})," button",s.jsx("br",{})]})]}),handle_response:i})},u=e.memo((({id:e,name:t,icon:i})=>s.jsx(h,{id:e,name:t,icon:i}))),h=e.memo((({id:t,name:r,icon:n})=>{const{refetchSession:d}=a(),{showDialog:c}=o(),m=e.useCallback((()=>{l.endpoint.call({}).then((()=>{d(),c("Guild Unset","Successfully unset guild")})).catch((e=>{c("Failed to unset guild",e+"")}))}),[d,c]);return s.jsx(s.Fragment,{children:t&&s.jsxs("div",{className:"bg-accent p-2 relative rounded",children:[s.jsx("h1",{className:"text-lg font-bold",children:"Currently Selected"}),s.jsxs("p",{className:"pb-1",children:[n&&s.jsx("img",{src:n,alt:r,className:"w-4 h-4 inline-block mr-1"}),r?r+" | ":"",t||"N/A"]}),s.jsx(i,{onClick:m,variant:"outline",size:"sm",className:"border-slate-600 absolute top-2 right-2",children:"Remove"})]})})}));export{c as default};
