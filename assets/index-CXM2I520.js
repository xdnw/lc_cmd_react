import{c as S,b as q,j as t,L as I,r as T,a as G}from"./index-SOjtd1du.js";import{h as U,L as E,W as V}from"./queries-BzWnpVnq.js";import{COMMANDS as J}from"./command-meta-Dt1HocaT.js";import{c as M}from"./command-utils-BF18nFEX.js";import{B as L}from"./button-C6_F57E5.js";import{T as K,B as Q}from"./DialogContext-DiRAa5qs.js";import{E as X}from"./bulkwrapper-CSppeL3K.js";import{A as Y}from"./apiform-Cou0YBqx.js";import"./useSuspenseQuery-7uza5ut4.js";import"./StateUtil-D0CNNC7k.js";import"./CommandComponent-Bi1lNJuB.js";import"./input-DGDhAddh.js";import"./SimpleChart-V9M2bt1B.js";import"./dropdown-menu-B_MP3PX6.js";import"./theme-provider-BQwJ-LrG.js";import"./table_util-BV1C7Yj5.js";import"./traditional-hdCCIUos.js";function Ae(){const l=S.c(1);q();let e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=t.jsx(X,{endpoint:U,args:{},children:Z}),l[0]=e):e=l[0],e}function Z(l){const{data:e}=l;return t.jsx(ne,{balance:e})}const F=J.options.ResourceType.options;function D(l){const e=Object.fromEntries(F.map((s,n)=>[s,l[n]]).filter(([,s])=>s!==0));return JSON.stringify(e)}function ee(l){return l.every(e=>e===0)}const te=()=>{const l=S.c(1);let e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=t.jsxs(t.Fragment,{children:[t.jsx(L,{variant:"outline",size:"sm",asChild:!0,children:t.jsxs(I,{to:"/guild_member",children:[t.jsx(E,{name:"ChevronLeft",className:"h-4 w-4"}),"Back"]})}),t.jsx("h1",{className:"text-2xl font-bold",children:"Balance"})]}),l[0]=e):e=l[0],e},se=l=>{const e=S.c(20),{balance:s,canWithdraw:n,amount:u,handleAmountChange:a}=l;let c,i,r;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=t.jsx("th",{className:"border border-gray-200",children:"Resource Type"}),r=t.jsx("th",{className:"border border-gray-200",children:"Value"}),e[0]=i,e[1]=r):(i=e[0],r=e[1]);let m;e[2]!==n?(m=n&&t.jsx("th",{className:"border border-gray-200",children:"Amount"}),e[2]=n,e[3]=m):m=e[3];let d;e[4]!==m?(d=t.jsxs("tr",{children:[i,r,m]}),e[4]=m,e[5]=d):d=e[5],c=d;const f=c;let o;e[6]!==a?(o=_=>{const g=parseInt(_.target.dataset.key||"0",10),y=parseInt(_.target.value,10)||0;a(g,y)},e[6]=a,e[7]=o):o=e[7];const j=o;let h;e[8]!==f?(h=t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:f}),e[8]=f,e[9]=h):h=e[9];let x;e[10]!==u||e[11]!==s||e[12]!==n||e[13]!==j?(x=F.map((_,g)=>_!=="CREDITS"&&t.jsxs("tr",{children:[t.jsx("td",{className:"border border-gray-200 px-1",children:_}),t.jsx("td",{className:"border border-gray-200 px-1",children:M(s.total[g])}),n&&t.jsx("td",{className:"border border-gray-200",children:t.jsx("input",{"data-key":g,type:"number",className:"px-1 w-20 relative",value:u[g],onChange:j})})]},_)),e[10]=u,e[11]=s,e[12]=n,e[13]=j,e[14]=x):x=e[14];let b;e[15]!==x?(b=t.jsx("tbody",{children:x}),e[15]=x,e[16]=b):b=e[16];let p;return e[17]!==h||e[18]!==b?(p=t.jsxs("table",{className:"table-auto divide-y bg-background",children:[h,b]}),e[17]=h,e[18]=b,e[19]=p):p=e[19],p},re=l=>{const e=S.c(10),{balance:s,showBreakdown:n}=l;let u,a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsxs("tr",{children:[t.jsx("th",{className:"border border-gray-200",children:"Category"}),F.map(de)]}),e[0]=a):a=e[0],u=a;const c=u,i=`transition-all duration-200 ease-in-out ${n?"p-1 max-h-screen opacity-100":"max-h-0 opacity-0 overflow-hidden"}`;let r;e[1]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:c}),e[1]=r):r=e[1];let m;e[2]!==s.breakdown?(m=Object.keys(s.breakdown),e[2]=s.breakdown,e[3]=m):m=e[3];let d;e[4]!==s.breakdown||e[5]!==m?(d=t.jsxs("table",{className:"table-auto divide-y w-full bg-background",children:[r,t.jsx("tbody",{children:m.map(o=>t.jsxs("tr",{children:[t.jsx("td",{className:"border border-gray-200 px-1",children:o}),s.breakdown[o].map((j,h)=>t.jsx("td",{className:"border border-gray-200 px-1",children:M(j)},`${o}-${h}`))]},o))})]}),e[4]=s.breakdown,e[5]=m,e[6]=d):d=e[6];let f;return e[7]!==i||e[8]!==d?(f=t.jsx("div",{className:i,children:d}),e[7]=i,e[8]=d,e[9]=f):f=e[9],f},le=l=>{const e=S.c(5),{amount:s,qualifiedId:n,balance:u}=l,a=T.useRef(null);let c;c=`/transfer resources receiver:${n} transfer:${D(s)} deposittype:${u.is_aa?"IGNORE":"DEPOSIT"}`;const i=c;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>a.current?a.current.textContent??"":"",e[0]=r):r=e[0];const m=r;let d;e[1]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsx("h4",{className:"text-lg font-bold",children:"Discord Withdraw Command"}),e[1]=d):d=e[1];let f;e[2]===Symbol.for("react.memo_cache_sentinel")?(f=t.jsx(K,{children:t.jsx(Q,{getText:m})}),e[2]=f):f=e[2];let o;return e[3]!==i?(o=t.jsxs("div",{className:"p-1 bg-accent relative",children:[d,f,t.jsx("p",{ref:a,children:i})]}),e[3]=i,e[4]=o):o=e[4],o};function ne(l){const e=S.c(33),{balance:s}=l,[n,u]=T.useState(!1);let a;a=s.access&&Object.keys(s.access).length>0;const c=a;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=new Array(F.length).fill(0),e[0]=i):i=e[0];const[r,m]=T.useState(i),[d,f]=T.useState(!1),[o,j]=T.useState(null);let h;e[1]===Symbol.for("react.memo_cache_sentinel")?(h=()=>{u(ae)},e[1]=h):h=e[1];const x=h;let b;e[2]===Symbol.for("react.memo_cache_sentinel")?(b=(R,P)=>{m(H=>{const z=[...H];return z[R]=P,z})},e[2]=b):b=e[2];const p=b;let _;_=(s.is_aa?"AA:":"")+s.id;const g=_;if(d){let R;return e[3]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsx(G,{variant:"ripple"}),e[3]=R):R=e[3],R}if(o)return o;let y;e[4]===Symbol.for("react.memo_cache_sentinel")?(y=t.jsx(te,{}),e[4]=y):y=e[4];let v,N;e[5]!==r||e[6]!==s||e[7]!==c?(v=t.jsx(se,{balance:s,canWithdraw:c,amount:r,handleAmountChange:p}),N=c&&t.jsx(oe,{setReactMessage:j,setLoading:f,balance:s,amount:r}),e[5]=r,e[6]=s,e[7]=c,e[8]=v,e[9]=N):(v=e[8],N=e[9]);let w;e[10]!==v||e[11]!==N?(w=t.jsxs("div",{className:"inline-block flex",children:[v,N]}),e[10]=v,e[11]=N,e[12]=w):w=e[12];let W;e[13]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx(L,{variant:"secondary",size:"sm",className:"w-full mb-1",asChild:!0,children:t.jsx(I,{to:"/records",children:"View Transaction Records"})}),e[13]=W):W=e[13];let k;e[14]!==n?(k=t.jsx(L,{variant:"secondary",size:"sm",onClick:x,className:"w-full",children:n?t.jsxs(t.Fragment,{children:["Hide",t.jsx(E,{name:"ChevronUp"})]}):t.jsxs(t.Fragment,{children:["Breakdown",t.jsx(E,{name:"ChevronDown"})]})}),e[14]=n,e[15]=k):k=e[15];let C;e[16]!==k||e[17]!==w?(C=t.jsxs("div",{className:"inline-block",children:[w,W,k]}),e[16]=k,e[17]=w,e[18]=C):C=e[18];let $;e[19]!==s||e[20]!==n?($=t.jsx(re,{balance:s,showBreakdown:n}),e[19]=s,e[20]=n,e[21]=$):$=e[21];let A;e[22]!==C||e[23]!==$?(A=t.jsxs("div",{className:"mb-1",children:[y,C,$]}),e[22]=C,e[23]=$,e[24]=A):A=e[24];let B;e[25]!==r||e[26]!==s||e[27]!==c||e[28]!==g?(B=c&&!ee(r)&&t.jsx(le,{amount:r,qualifiedId:g,balance:s}),e[25]=r,e[26]=s,e[27]=c,e[28]=g,e[29]=B):B=e[29];let O;return e[30]!==A||e[31]!==B?(O=t.jsxs(t.Fragment,{children:[A,B]}),e[30]=A,e[31]=B,e[32]=O):O=e[32],O}function ae(l){return!l}function oe(l){const e=S.c(16),{balance:s,amount:n,setLoading:u,setReactMessage:a}=l;let c;e[0]!==a?(c=b=>{a(t.jsx(me,{message:b.message}))},e[0]=a,e[1]=c):c=e[1];const i=c;let r;e[2]!==u||e[3]!==a?(r=b=>{const{data:p}=b;u(!1),a(t.jsx(ce,{message:p}))},e[2]=u,e[3]=a,e[4]=r):r=e[4];const m=r,d=(s.is_aa?"AA:":"")+s.id;let f;e[5]!==n?(f=D(n),e[5]=n,e[6]=f):f=e[6];const o=s.is_aa?"IGNORE":"DEPOSIT";let j;e[7]!==d||e[8]!==f||e[9]!==o?(j={receiver:d,amount:f,note:o},e[7]=d,e[8]=f,e[9]=o,e[10]=j):j=e[10];let h;e[11]===Symbol.for("react.memo_cache_sentinel")?(h=t.jsxs("span",{className:"transform rotate-90 flex items-center",children:[t.jsx(E,{name:"ChevronUp"}),"Withdraw"]}),e[11]=h):h=e[11];let x;return e[12]!==i||e[13]!==m||e[14]!==j?(x=t.jsx(Y,{endpoint:V,default_values:j,label:h,handle_error:i,classes:"w-10 p-0 row-span-full h-50 flex items-center justify-center bg-destructive",handle_response:m}),e[12]=i,e[13]=m,e[14]=j,e[15]=x):x=e[15],x}function ce(l){const e=S.c(36),{message:s}=l;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx(L,{variant:"outline",size:"sm",asChild:!0,children:t.jsxs(I,{to:"/guild_member",children:[t.jsx(E,{name:"ChevronLeft",className:"h-4 w-4"}),"Back"]})}),e[0]=n):n=e[0];const u=`${s.status_success?"bg-green-100/10 text-green-500 border-green-400":"bg-red-100/10 text-red-500 border-red-400"} border-2 px-4 py-3 relative`;let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsx("strong",{className:"font-bold",children:"Success!"}),e[1]=a):a=e[1];let c;e[2]!==s.status_msg?(c=t.jsxs("span",{className:"block sm:inline",children:[" ",s.status_msg]}),e[2]=s.status_msg,e[3]=c):c=e[3];let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=t.jsx("strong",{children:"Status:"}),e[4]=i):i=e[4];let r;e[5]!==s.status?(r=t.jsxs("li",{children:[i," ",s.status]}),e[5]=s.status,e[6]=r):r=e[6];let m;e[7]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsx("strong",{children:"Receiver: "}),e[7]=m):m=e[7];const d=`https://politicsandwar.com/${s.receiver_is_aa?"alliance":"nation"}/id=${s.receiver_id}`,f=s.receiver_is_aa?"AA:":"nation:";let o;e[8]!==s.receiver_id||e[9]!==s.receiver_name||e[10]!==d||e[11]!==f?(o=t.jsxs("li",{children:[m,t.jsxs(I,{className:"text-blue-500 hover:text-blue-600 underline",to:d,children:[s.receiver_name," / ",f,s.receiver_id]})]}),e[8]=s.receiver_id,e[9]=s.receiver_name,e[10]=d,e[11]=f,e[12]=o):o=e[12];let j;e[13]===Symbol.for("react.memo_cache_sentinel")?(j=t.jsx("strong",{children:"Amount:"}),e[13]=j):j=e[13];let h;e[14]!==s.amount?(h=D(s.amount),e[14]=s.amount,e[15]=h):h=e[15];let x;e[16]!==h?(x=t.jsxs("li",{children:[j," ",h]}),e[16]=h,e[17]=x):x=e[17];let b;e[18]===Symbol.for("react.memo_cache_sentinel")?(b=t.jsx("strong",{children:"Note:"}),e[18]=b):b=e[18];let p;e[19]!==s.note?(p=t.jsxs("li",{children:[b," ",s.note]}),e[19]=s.note,e[20]=p):p=e[20];let _;e[21]===Symbol.for("react.memo_cache_sentinel")?(_=t.jsx("strong",{children:"Messages:"}),e[21]=_):_=e[21];let g;e[22]!==s.messages?(g=s.messages.map(ie),e[22]=s.messages,e[23]=g):g=e[23];let y;e[24]!==g?(y=t.jsxs("li",{children:[_,t.jsx("ul",{className:"list-disc list-inside ml-4",children:g})]}),e[24]=g,e[25]=y):y=e[25];let v;e[26]!==o||e[27]!==x||e[28]!==p||e[29]!==y||e[30]!==r?(v=t.jsxs("ul",{className:"mt-2 list-disc list-inside",children:[r,o,x,p,y]}),e[26]=o,e[27]=x,e[28]=p,e[29]=y,e[30]=r,e[31]=v):v=e[31];let N;return e[32]!==v||e[33]!==u||e[34]!==c?(N=t.jsxs(t.Fragment,{children:[n,t.jsxs("div",{className:u,role:"alert",children:[a,c,v]})]}),e[32]=v,e[33]=u,e[34]=c,e[35]=N):N=e[35],N}function ie(l,e){return t.jsx("li",{children:l},e)}function me(l){const e=S.c(4),{message:s}=l;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx(L,{variant:"outline",size:"sm",asChild:!0,children:t.jsxs(I,{to:"/guild_member",children:[t.jsx(E,{name:"ChevronLeft",className:"h-4 w-4"}),"Back"]})}),e[0]=n):n=e[0];let u;e[1]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx("strong",{className:"font-bold",children:"Error!"}),e[1]=u):u=e[1];let a;return e[2]!==s?(a=t.jsxs(t.Fragment,{children:[n,t.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[u,t.jsxs("span",{className:"block sm:inline",children:[" ",s]})]})]}),e[2]=s,e[3]=a):a=e[3],a}function de(l){return t.jsx("th",{className:"border border-gray-200",children:l},l)}export{me as TransferError,ce as TransferSuccess,oe as WithdrawForm,Ae as default};
