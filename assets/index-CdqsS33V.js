import{j as e,a as s,r as t,u as o,d as r,L as a}from"./index-DK7pfVEl.js";import{B as n}from"./button-jLO7Q5x3.js";import{S as i,p as l}from"./endpoints-DntC7Iwe.js";import{u as m,e as u}from"./copytoclipboard-CFiLE7PK.js";import{E as d}from"./bulkwrapper-oWVWKoxJ.js";import{u as c}from"./SessionContext-Dp0hqTkt.js";import"./useSuspenseQuery-Bx5lj6SA.js";import"./loading-Cby48QAi.js";import"./useQuery-CDiZ996I.js";function p(){const{token:p}=s(),{showDialog:j}=m(),{refetchSession:f}=c(),[g,x]=t.useState(!1),h=o();t.useEffect((()=>{g&&(r.set("lc_token_exists",Math.random().toString(36).substring(2)),h.removeQueries({queryKey:[i.endpoint.name]}),f())}),[g,f,h]);const y=t.useCallback((s=>{j("Login Failed",e.jsxs(e.Fragment,{children:["Failed to set login token. Please try again, try a different login method, or contact support.",e.jsx("div",{className:"relative overflow-auto",children:e.jsx(u,{text:s.message})})]}),!1)}),[j]);return e.jsx(d,{endpoint:l,args:{token:p??""},handle_error:y,children:({data:s})=>(x(!0),e.jsxs(e.Fragment,{children:["Logged in Successfully!",e.jsx("br",{}),e.jsx(n,{variant:"outline",size:"sm",className:"border-slate-600",asChild:!0,children:e.jsx(a,{to:"/home",children:"Return Home"})})]}))})}function j(){return e.jsx(p,{})}export{p as LoginComponent,j as default};
