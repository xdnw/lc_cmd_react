import{c as Q,b as fe,e as ue,r as J,j as l,L as ie,a as he}from"./index-nW9DkA3u.js";import{u as ne}from"./DialogContext-BfwqmJEN.js";import{a as re,B as pe}from"./button-ujMD_D3S.js";import{f as te,a as be,c as L}from"./command-utils-CoW9iswN.js";import{COMMANDS as _e}from"./command-meta-Dd5nXUBW.js";import{j as V,k as ae}from"./queries-B0bYDAFD.js";import{Q as ge}from"./ArgInput-tGvOpFqN.js";import{u as xe}from"./StateUtil-BU5RTinU.js";import{C as je}from"./table_util-BhRzU9Kk.js";import{u as ye}from"./SessionContext-DEvhfQ2e.js";import{A as oe}from"./apiform-Bof5oPBt.js";import"./input-VVMxW7J4.js";import"./MathUtil-8RZlDOhB.js";import"./bulkwrapper-CgTU9lyN.js";import"./useSuspenseQuery--1Q7REA5.js";import"./useQuery-fCXS6SR7.js";import"./CommandComponent-DHq1-Tfc.js";import"./SimpleChart-BZ5w6o67.js";import"./dropdown-menu-6Z3pQS9A.js";import"./theme-provider-BEuElyuX.js";import"./traditional-D5YV84_U.js";function qe(){const t=Q.c(46),{nation:e}=fe(),{session:n}=ye(),[i,s]=xe(e??n?.nation_name),m=ue();let h,r;t[0]!==e||t[1]!==s?(h=()=>{e&&s(M=>M!==e?e:M)},r=[e,s],t[0]=e,t[1]=s,t[2]=h,t[3]=r):(h=t[2],r=t[3]),J.useEffect(h,r);let a,o;t[4]!==e||t[5]!==n||t[6]!==s?(a=()=>{n?.nation_name&&!e&&s(M=>M!==n.nation_name?n.nation_name:M)},o=[n,e,s],t[4]=e,t[5]=n,t[6]=s,t[7]=a,t[8]=o):(a=t[7],o=t[8]),J.useEffect(a,o);let c;t[9]!==m||t[10]!==s?(c=M=>{s(M),m(`/raid/${M}`)},t[9]=m,t[10]=s,t[11]=c):c=t[11];const d=c,[f,b]=J.useState(null),[u,v]=J.useState(null);let _,j;t[12]===Symbol.for("react.memo_cache_sentinel")?(j={nations:"*,#position<=1",num_results:"25"},t[12]=j):j=t[12];let S;t[13]===Symbol.for("react.memo_cache_sentinel")?(S={endpoint:V,default_values:j,description:"Attackable applicants and nones inactive for 7d"},t[13]=S):S=t[13];let g;t[14]===Symbol.for("react.memo_cache_sentinel")?(g={nations:"*",num_results:"25"},t[14]=g):g=t[14];let y;t[15]===Symbol.for("react.memo_cache_sentinel")?(y={endpoint:V,default_values:g,description:"All attackable nations inactive for 7d"},t[15]=y):y=t[15];let x;t[16]===Symbol.for("react.memo_cache_sentinel")?(x={nations:"*",num_results:"25",beige_turns:"24"},t[16]=x):x=t[16];let N;t[17]===Symbol.for("react.memo_cache_sentinel")?(N={endpoint:V,default_values:x,description:"All nations inactive for 7d, including on beige"},t[17]=N):N=t[17];let $;t[18]===Symbol.for("react.memo_cache_sentinel")?($={nations:"#tankpct<0.2,#soldierpct<0.4,*",num_results:"25",time_inactive:"0d",weak_ground:"true"},t[18]=$):$=t[18];let C;t[19]===Symbol.for("react.memo_cache_sentinel")?(C={endpoint:V,default_values:$,description:"Nations with weak ground, including active nations"},t[19]=C):C=t[19];let k;t[20]===Symbol.for("react.memo_cache_sentinel")?(k={nations:"#tankpct<0.2,#soldierpct<0.4,*",num_results:"25",time_inactive:"2d",weak_ground:"true"},t[20]=k):k=t[20];let O;t[21]===Symbol.for("react.memo_cache_sentinel")?(O={endpoint:V,default_values:k,description:"Nations with weak ground, inactive for 2d"},t[21]=O):O=t[21];let A;t[22]===Symbol.for("react.memo_cache_sentinel")?(A={nations:"#def>0,#RelativeStrength<1,*",num_results:"25",time_inactive:"0d",weak_ground:"true"},t[22]=A):A=t[22];let w;t[23]===Symbol.for("react.memo_cache_sentinel")?(w={endpoint:V,default_values:A,description:"Nations losing wars"},t[23]=w):w=t[23];let R;t[24]===Symbol.for("react.memo_cache_sentinel")?(R={nations:"*",num_results:"25",ignoreODP:"true",includeAllies:"true",maxRelativeCounterStrength:"90"},t[24]=R):R=t[24];let D;t[25]===Symbol.for("react.memo_cache_sentinel")?(D={app_7d:S,members:y,beige:N,ground:C,ground_2d:O,losing:w,unprotected:{endpoint:ae,default_values:R,description:"Nations least likely to defend or have counters"}},t[25]=D):D=t[25],_=D;const E=_;let B,p;t[26]!==i||t[27]!==d?(p=l.jsx(Ne,{pickedNation:i,updateNation:d}),t[26]=i,t[27]=d,t[28]=p):p=t[28],B=p;const F=B;let T,P;t[29]===Symbol.for("react.memo_cache_sentinel")?(P=Object.keys(E),t[29]=P):P=t[29];let I;t[30]!==i?(I=P.map((M,me)=>l.jsx("span",{children:l.jsx(ve,{label:M,option:E[M],endpoint:E[M].endpoint,setDesc:v,setRaidOutput:b,nation:i??"",loading:!1})},me)),t[30]=i,t[31]=I):I=t[31],T=I;const ce=T;let se,W;t[32]!==u?(W=u&&l.jsx("div",{className:"p-1 bg-primary/10",children:u}),t[32]=u,t[33]=W):W=t[33],se=W;const K=se;let Y;t[34]===Symbol.for("react.memo_cache_sentinel")?(Y=()=>{b(null),v("")},t[34]=Y):Y=t[34];const de=Y;let le,z;t[35]!==f?(z=l.jsx(ke,{output:f,dismiss:de}),t[35]=f,t[36]=z):z=t[36],le=z;const X=le;let H;t[37]===Symbol.for("react.memo_cache_sentinel")?(H=l.jsx("h1",{className:"text-2xl mt-2 font-bold",children:"War / Raiding"}),t[37]=H):H=t[37];const Z=(!n||!n.nation)&&!i&&F,ee=i&&ce;let q;t[38]===Symbol.for("react.memo_cache_sentinel")?(q=l.jsx("br",{}),t[38]=q):q=t[38];let U;t[39]!==K||t[40]!==X||t[41]!==ee?(U=l.jsxs("div",{className:"p-2 my-1 relative",children:["Raiding: ",ee,q,K,X]}),t[39]=K,t[40]=X,t[41]=ee,t[42]=U):U=t[42];let G;return t[43]!==Z||t[44]!==U?(G=l.jsxs("div",{className:"bg-light/10 border border-light/10 p-2 rounded mt-2",children:[H,Z,U]}),t[43]=Z,t[44]=U,t[45]=G):G=t[45],G}function Ne(t){const e=Q.c(13),{pickedNation:n,updateNation:i}=t;let s;e[0]!==i?(s=(f,b)=>{i(b)},e[0]=i,e[1]=s):s=e[1];const m=s,h=`${n?"text-primary/80 border-secondary":"text-red-500 border-red-500/25"} border w-full mb-1 p-1 relative bg-accent rounded`;let r;e[2]!==n?(r=n?l.jsxs(l.Fragment,{children:["Currently selected: ",n]}):l.jsx(l.Fragment,{children:"You MUST Select a Nation to use this tool or add it to the url or login."}),e[2]=n,e[3]=r):r=e[3];let a;e[4]!==h||e[5]!==r?(a=l.jsx("div",{className:h,children:r}),e[4]=h,e[5]=r,e[6]=a):a=e[6];const o=n??"";let c;e[7]!==m||e[8]!==o?(c=l.jsx(ge,{element:"DBNation",multi:!1,argName:"nation",initialValue:o,setOutputValue:m}),e[7]=m,e[8]=o,e[9]=c):c=e[9];let d;return e[10]!==a||e[11]!==c?(d=l.jsxs(l.Fragment,{children:[a,c]}),e[10]=a,e[11]=c,e[12]=d):d=e[12],d}function ve(t){const e=Q.c(19),{option:n,label:i,endpoint:s,setRaidOutput:m,loading:h,setDesc:r,nation:a}=t,{showDialog:o}=ne();let c;const d=n.default_values;let f;e[0]!==a||e[1]!==d?(f={...d,nation:a},e[0]=a,e[1]=d,e[2]=f):f=e[2],c=f;const b=c;let u;e[3]!==n.description||e[4]!==r||e[5]!==m?(u=N=>{const{data:$}=N;r(n.description),m(!0),m($)},e[3]=n.description,e[4]=r,e[5]=m,e[6]=u):u=e[6];const v=u;let _;e[7]!==m||e[8]!==o?(_=N=>{m(null),o("Error",N.message,!0)},e[7]=m,e[8]=o,e[9]=_):_=e[9];const j=_;let S,g;e[10]!==h?(g=re("mb-1 border-primary/20",{"cursor-wait disabled text-muted":h}),e[10]=h,e[11]=g):g=e[11],S=g;const y=S;let x;return e[12]!==s||e[13]!==j||e[14]!==v||e[15]!==i||e[16]!==y||e[17]!==b?(x=l.jsx(oe,{endpoint:s,default_values:b,label:i,handle_response:v,handle_error:j,classes:y}),e[12]=s,e[13]=j,e[14]=v,e[15]=i,e[16]=y,e[17]=b,e[18]=x):x=e[18],x}function Ge(t){const e=Q.c(13),{options:n,setRaidOutput:i,loading:s,setDesc:m}=t,{showDialog:h}=ne();let r;e[0]!==m||e[1]!==i?(r=v=>{const{data:_}=v;m("Unprotected Nations"),i(!0),i(_)},e[0]=m,e[1]=i,e[2]=r):r=e[2];const a=r;let o;e[3]!==i||e[4]!==h?(o=v=>{i(null),h("Error",v.message,!0)},e[3]=i,e[4]=h,e[5]=o):o=e[5];const c=o;let d,f;e[6]!==s?(f=re("mb-1 border-primary/20",{"cursor-wait disabled text-muted":s}),e[6]=s,e[7]=f):f=e[7],d=f;const b=d;let u;return e[8]!==b||e[9]!==c||e[10]!==a||e[11]!==n?(u=l.jsx(oe,{endpoint:ae,default_values:n,label:"unprotected",handle_response:a,handle_error:c,classes:b}),e[8]=b,e[9]=c,e[10]=a,e[11]=n,e[12]=u):u=e[12],u}const Se=_e.options.Rank.options.map(t=>t==="REMOVE"?"":t);function ke(t){const e=Q.c(40),{output:n,dismiss:i}=t;if(!n){let p;return e[0]===Symbol.for("react.memo_cache_sentinel")?(p=l.jsx(l.Fragment,{}),e[0]=p):p=e[0],p}if(n===!0){let p;return e[1]===Symbol.for("react.memo_cache_sentinel")?(p=l.jsx(he,{variant:"ripple"}),e[1]=p):p=e[1],p}const s=n;let m,h,r,a;e[2]===Symbol.for("react.memo_cache_sentinel")?(h=l.jsx("th",{children:"Name"}),r=l.jsx("th",{children:"Alliance"}),a=l.jsx("th",{}),e[2]=h,e[3]=r,e[4]=a):(h=e[2],r=e[3],a=e[4]);let o;e[5]!==s.include_strength?(o=s.include_strength&&l.jsx("th",{children:"Strength"}),e[5]=s.include_strength,e[6]=o):o=e[6];let c,d,f,b,u,v,_,j,S,g,y,x;e[7]===Symbol.for("react.memo_cache_sentinel")?(S=l.jsx("th",{children:"Loot"}),g=l.jsx("th",{children:"Rank"}),y=l.jsx("th",{children:"Active"}),x=l.jsx("th",{children:"ðŸ’‚"}),c=l.jsx("th",{children:"âš™"}),d=l.jsx("th",{children:"âœˆ"}),f=l.jsx("th",{children:"ðŸš¢"}),b=l.jsx("th",{children:"ðŸ”Ž"}),u=l.jsx("th",{children:"ðŸš€"}),v=l.jsx("th",{children:"â˜¢"}),_=l.jsx("th",{children:"Score"}),j=l.jsx("th",{children:"Infra"}),e[7]=c,e[8]=d,e[9]=f,e[10]=b,e[11]=u,e[12]=v,e[13]=_,e[14]=j,e[15]=S,e[16]=g,e[17]=y,e[18]=x):(c=e[7],d=e[8],f=e[9],b=e[10],u=e[11],v=e[12],_=e[13],j=e[14],S=e[15],g=e[16],y=e[17],x=e[18]);let N;e[19]!==o?(N=l.jsxs("tr",{children:[h,r,a,o,S,g,y,x,c,d,f,b,u,v,_,j]}),e[19]=o,e[20]=N):N=e[20],m=N;const $=m;let C,k;e[21]!==s.self||e[22]!==s.targets?(k=[s.self,...s.targets],e[21]=s.self,e[22]=s.targets,e[23]=k):k=e[23];let O;e[24]!==k||e[25]!==s.include_strength||e[26]!==s.self?(O=k.map((p,F)=>l.jsx(we,{includeStrength:s.include_strength,now:Date.now(),self:s.self,target:p,classes:`even:bg-black/10 dark:even:bg-white/5 ${p.id===s.self.id?"border border-2 border-blue-500/50 bg-blue-500/20":""}`},F)),e[24]=k,e[25]=s.include_strength,e[26]=s.self,e[27]=O):O=e[27],C=O;const A=C;let w;e[28]!==$?(w=l.jsx("thead",{className:"text-left",children:$}),e[28]=$,e[29]=w):w=e[29];let R;e[30]!==A?(R=l.jsx("tbody",{children:A}),e[30]=A,e[31]=R):R=e[31];let D;e[32]!==w||e[33]!==R?(D=l.jsxs("table",{className:"w-full text-sm table-auto",children:[w,R]}),e[32]=w,e[33]=R,e[34]=D):D=e[34];let E;e[35]!==i?(E=l.jsx(pe,{onClick:i,variant:"outline",size:"sm",className:"w-full",children:"Dismiss"}),e[35]=i,e[36]=E):E=e[36];let B;return e[37]!==D||e[38]!==E?(B=l.jsxs("div",{className:"w-full",children:[D,E]}),e[37]=D,e[38]=E,e[39]=B):B=e[39],B}function we(t){const e=Q.c(84),{includeStrength:n,self:i,target:s,classes:m,now:h}=t;let r;e[0]!==i.id||e[1]!==s.id||e[2]!==s.nation?(r=s.id==i.id?"Your Nation":l.jsx(ie,{className:"text-blue-600 hover:text-blue-800 underline",to:`https://politicsandwar.com/nation/id=${s.id}`,children:s.nation}),e[0]=i.id,e[1]=s.id,e[2]=s.nation,e[3]=r):r=e[3];let a;e[4]!==r?(a=l.jsx("td",{className:"border border-gray-500/25 p-1",children:r}),e[4]=r,e[5]=a):a=e[5];let o;e[6]!==i.id||e[7]!==s.alliance||e[8]!==s.alliance_id||e[9]!==s.id?(o=s.id==i.id?"":s.alliance_id===0?"None":l.jsx(ie,{className:"text-blue-600 hover:text-blue-800 underline",to:`https://politicsandwar.com/alliance/id=${s.alliance_id}`,children:s.alliance}),e[6]=i.id,e[7]=s.alliance,e[8]=s.alliance_id,e[9]=s.id,e[10]=o):o=e[10];let c;e[11]!==o?(c=l.jsx("td",{className:"border border-gray-500/25 p-1",children:o}),e[11]=o,e[12]=c):c=e[12];let d;e[13]!==s.beige_turns||e[14]!==s.color_id?(d=l.jsx("td",{className:"border border-gray-500/25",children:l.jsx("div",{className:"flex justify-center items-center text-center",children:l.jsx(je,{colorId:s.color_id,beigeTurns:s.beige_turns})})}),e[13]=s.beige_turns,e[14]=s.color_id,e[15]=d):d=e[15];let f;e[16]!==n||e[17]!==i.id||e[18]!==s.id||e[19]!==s.strength?(f=n&&l.jsx("td",{className:"border-0.5border border-gray-500/25 p-1",children:s.id!=i.id?`${te(s.strength)}%`:""}),e[16]=n,e[17]=i.id,e[18]=s.id,e[19]=s.strength,e[20]=f):f=e[20];const b=s.id==i.id?"":`$${s.expected!=0&&s.expected!=s.actual?te(s.expected)+"-":""}${te(s.actual)}`;let u;e[21]!==b?(u=l.jsx("td",{className:"border border-gray-500/25 p-1",children:b}),e[21]=b,e[22]=u):u=e[22];const v=Se[s.position];let _;e[23]!==v?(_=l.jsx("td",{className:"border border-gray-500/25 p-1",children:v}),e[23]=v,e[24]=_):_=e[24];let j;e[25]!==h||e[26]!==s.active_ms?(j=be(Math.round((h-s.active_ms)/1e3),2),e[25]=h,e[26]=s.active_ms,e[27]=j):j=e[27];let S;e[28]!==j?(S=l.jsx("td",{className:"border border-gray-500/25 p-1",children:j}),e[28]=j,e[29]=S):S=e[29];let g;e[30]!==s.soldier?(g=L(s.soldier),e[30]=s.soldier,e[31]=g):g=e[31];let y;e[32]!==g?(y=l.jsx("td",{className:"border border-gray-500/25 p-1",children:g}),e[32]=g,e[33]=y):y=e[33];let x;e[34]!==s.tank?(x=L(s.tank),e[34]=s.tank,e[35]=x):x=e[35];let N;e[36]!==x?(N=l.jsx("td",{className:"border border-gray-500/25 p-1",children:x}),e[36]=x,e[37]=N):N=e[37];let $;e[38]!==s.aircraft?($=L(s.aircraft),e[38]=s.aircraft,e[39]=$):$=e[39];let C;e[40]!==$?(C=l.jsx("td",{className:"border border-gray-500/25 p-1",children:$}),e[40]=$,e[41]=C):C=e[41];let k;e[42]!==s.ship?(k=L(s.ship),e[42]=s.ship,e[43]=k):k=e[43];let O;e[44]!==k?(O=l.jsx("td",{className:"border border-gray-500/25 p-1",children:k}),e[44]=k,e[45]=O):O=e[45];let A;e[46]!==s.spies?(A=L(s.spies),e[46]=s.spies,e[47]=A):A=e[47];let w;e[48]!==A?(w=l.jsx("td",{className:"border border-gray-500/25 p-1",children:A}),e[48]=A,e[49]=w):w=e[49];let R;e[50]!==s.missile?(R=L(s.missile),e[50]=s.missile,e[51]=R):R=e[51];let D;e[52]!==R?(D=l.jsx("td",{className:"border border-gray-500/25 p-1",children:R}),e[52]=R,e[53]=D):D=e[53];let E;e[54]!==s.nuke?(E=L(s.nuke),e[54]=s.nuke,e[55]=E):E=e[55];let B;e[56]!==E?(B=l.jsx("td",{className:"border border-gray-500/25 p-1",children:E}),e[56]=E,e[57]=B):B=e[57];let p;e[58]!==s.score?(p=L(s.score),e[58]=s.score,e[59]=p):p=e[59];let F;e[60]!==p?(F=l.jsx("td",{className:"border border-gray-500/25 p-1",children:p}),e[60]=p,e[61]=F):F=e[61];let T;e[62]!==s.avg_infra?(T=L(Math.round(s.avg_infra)),e[62]=s.avg_infra,e[63]=T):T=e[63];let P;e[64]!==T?(P=l.jsx("td",{className:"border border-gray-500/25 p-1",children:T}),e[64]=T,e[65]=P):P=e[65];let I;return e[66]!==m||e[67]!==_||e[68]!==S||e[69]!==y||e[70]!==N||e[71]!==C||e[72]!==a||e[73]!==O||e[74]!==w||e[75]!==D||e[76]!==B||e[77]!==F||e[78]!==P||e[79]!==c||e[80]!==d||e[81]!==f||e[82]!==u?(I=l.jsxs("tr",{className:m,children:[a,c,d,f,u,_,S,y,N,C,O,w,D,B,F,P]}),e[66]=m,e[67]=_,e[68]=S,e[69]=y,e[70]=N,e[71]=C,e[72]=a,e[73]=O,e[74]=w,e[75]=D,e[76]=B,e[77]=F,e[78]=P,e[79]=c,e[80]=d,e[81]=f,e[82]=u,e[83]=I):I=e[83],I}export{Ne as PickNation,ve as RaidButton,ke as RaidOutput,Ge as UnprotectedButton,we as WebTargetRow,qe as default};
