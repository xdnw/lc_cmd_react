import{c as y,b as _,f as b,r as j,u as L,j as t,i as k,L as C}from"./index-CkdKFI98.js";import{B as v}from"./button-C_VcwxQ2.js";import{S as P,l as F}from"./queries-ByOb2jVj.js";import{u as N,a as T}from"./DialogContext-D_bUabOf.js";import{E as I}from"./bulkwrapper-BIfe5AfD.js";import{u as R}from"./SessionContext-oJbdrx_W.js";import"./command-utils-CkY5cVJv.js";import"./command-meta-r_ruCnhz.js";import"./useSuspenseQuery-AkitrqQh.js";import"./useQuery-CAimMO8B.js";function $(){const e=y.c(16),{token:s}=_(),[p]=b();let o;e[0]!==p?(o=p.get("guild"),e[0]=p,e[1]=o):o=e[1];const r=o,{showDialog:g}=N(),{refetchSession:n}=R(),[i,E]=j.useState(!1),a=L();let l,c;e[2]!==i||e[3]!==a||e[4]!==n?(l=()=>{i&&(k.set("lc_token_exists",Math.random().toString(36).substring(2)),a.removeQueries({queryKey:[P.endpoint.name]}),n())},c=[i,n,a],e[2]=i,e[3]=a,e[4]=n,e[5]=l,e[6]=c):(l=e[5],c=e[6]),j.useEffect(l,c);let m;e[7]!==g?(m=S=>{g("Login Failed",t.jsxs(t.Fragment,{children:["Failed to set login token. Please try again, try a different login method, or contact support.",t.jsx("div",{className:"relative overflow-auto",children:t.jsx(T,{text:S.message})})]}),!1)},e[7]=g,e[8]=m):m=e[8];const h=m;let u;e[9]!==r||e[10]!==s?(u=r?{token:s??"",guild_id:r}:{token:s??""},e[9]=r,e[10]=s,e[11]=u):u=e[11];const x=u;let f;e[12]===Symbol.for("react.memo_cache_sentinel")?(f=S=>(E(!0),t.jsxs(t.Fragment,{children:["Logged in Successfully!",t.jsx("br",{}),t.jsx(v,{variant:"outline",size:"sm",className:"border-slate-600",asChild:!0,children:t.jsx(C,{to:"/home",children:"Return Home"})})]})),e[12]=f):f=e[12];let d;return e[13]!==x||e[14]!==h?(d=t.jsx(I,{endpoint:F,args:x,handle_error:h,children:f}),e[13]=x,e[14]=h,e[15]=d):d=e[15],d}function M(){const e=y.c(1);let s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=t.jsx($,{}),e[0]=s):s=e[0],s}export{$ as LoginComponent,M as default};
