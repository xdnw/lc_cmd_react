import{j as e,r as s,u as t,d as o,L as r}from"./index-C3IYMWuf.js";import{B as a}from"./button-ojqvaOFL.js";import{S as i,q as n}from"./endpoints-C7yNECRQ.js";import{u as l,e as d}from"./copytoclipboard-CYjqdKKr.js";import{E as u}from"./bulkwrapper-Ao1Won9N.js";import{u as m}from"./SessionContext-EI8bqMkf.js";import"./useSuspenseQuery-C4Rjs_Xf.js";import"./loading-xytKfuKY.js";import"./useQuery-DRxnS7Xn.js";function c(){const c=window.location.href.split("#")[0].split("?")[1]||"",p=new URLSearchParams(c).get("code"),{showDialog:j}=l(),{refetchSession:f}=m(),[h,g]=s.useState(!1),x=t();s.useEffect((()=>{h&&(o.set("lc_token_exists",Math.random().toString(36).substring(2)),x.removeQueries({queryKey:[i.endpoint.name]}),f())}),[h,f,x]);const y=s.useCallback((s=>{j("Login Failed",e.jsxs(e.Fragment,{children:["Failed to set login OAuth2 Code. Please try again, try a different login method, or contact support.",e.jsx("div",{className:"relative overflow-auto",children:e.jsx(d,{text:s.message})})]}),!1)}),[j]);return e.jsx(u,{endpoint:n,args:{code:p??""},handle_error:y,children:({data:s})=>(g(!0),e.jsxs(e.Fragment,{children:["Logged in Successfully via OAuth2!",e.jsx("br",{}),e.jsx(a,{variant:"outline",size:"sm",className:"border-slate-600",asChild:!0,children:e.jsx(r,{to:"/home",children:"Return Home"})})]}))})}function p(){return e.jsx(c,{})}export{c as OAuth2Component,p as default};
