import{r as e,j as s,L as t}from"./index-C3E2-SUH.js";import{B as i}from"./button-DCZsNPnk.js";import{L as n,a as o,c as l}from"./queries-BuM6HYrb.js";import{u as r}from"./DialogContext-BJx4vabV.js";import{u as a}from"./SessionContext-Bay44Hsw.js";import{A as c}from"./apiform-BYdO01Da.js";import"./useQuery-Zg5Nvbp7.js";import"./StateUtil-CGhFEjjS.js";import"./bulkwrapper-CffFvLGh.js";import"./useSuspenseQuery-DiLOpIi1.js";import"./loading-CI11-4Uh.js";import"./CommandComponent-H-FPWJ9S.js";import"./input-CXVReF6E.js";import"./SimpleChart-OHRi1aHe.js";import"./theme-provider-CY-pBUqn.js";import"./table_util-C8W_dWTS.js";const d=()=>{const{session:o,error:l,setSession:c,refetchSession:d}=a(),{showDialog:h}=r(),p=e.useCallback((e=>{d(),h("Guild Set",s.jsxs("div",{className:"flex items-center",children:[s.jsx("img",{src:e.icon,alt:"Guild Icon",className:"w-8 h-8 mr-2"}),s.jsxs("span",{children:["Selected guild with id ",e.id," and name ",e.name]})]}),!1)}),[d,h]);return s.jsxs(s.Fragment,{children:[s.jsx(i,{variant:"outline",size:"sm",asChild:!0,children:s.jsxs(t,{to:"/home",children:[s.jsx(n,{name:"ChevronLeft",className:"h-4 w-4"}),"Home"]})}),s.jsxs("div",{className:"bg-light/10 border border-light/10 p-2 m-0 mt-2",children:[(null==o?void 0:o.guild)&&s.jsx(u,{id:o.guild,name:o.guild_name,icon:o.guild_icon}),s.jsxs("div",{className:"bg-accent p-2 rounded relative",children:[s.jsx("h1",{className:"text-lg font-bold",children:"Don't see your server here? "}),s.jsxs(t,{className:"text-blue-600 hover:text-blue-800 underline",to:"https://discord.com/api/oauth2/authorize?client_id=672237266940198960&permissions=395606879321&scope=bot",children:["Invite ","Locutus"]})," to your server, then see the ",s.jsx(t,{className:"text-blue-600 hover:text-blue-800 underline",to:"https://github.com/xdnw/locutus/wiki/initial_setup",children:"Wiki"})," for installation instructions."]}),s.jsx("hr",{className:"my-2"}),s.jsx(m,{handleResponse:p})]})]})},m=({handleResponse:t})=>{const i=e.useCallback((({data:e})=>{t(e)}),[t]);return s.jsx(c,{endpoint:o,message:s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"text-lg font-extrabold",children:"Guild Select:"}),s.jsxs("p",{children:["Select your guild using the dropdown below, then press the ",s.jsx("kbd",{children:"Submit"})," button",s.jsx("br",{})]})]}),handle_response:i})},u=e.memo((({id:e,name:t,icon:i})=>s.jsx(h,{id:e,name:t,icon:i}))),h=e.memo((({id:t,name:n,icon:o})=>{const{refetchSession:c}=a(),{showDialog:d}=r(),m=e.useCallback((()=>{l.endpoint.call({}).then((()=>{c(),d("Guild Unset","Successfully unset guild")})).catch((e=>{d("Failed to unset guild",e+"")}))}),[c,d]);return s.jsx(s.Fragment,{children:t&&s.jsxs("div",{className:"bg-accent p-2 relative rounded",children:[s.jsx("h1",{className:"text-lg font-bold",children:"Currently Selected"}),s.jsxs("p",{className:"pb-1",children:[o&&s.jsx("img",{src:o,alt:n,className:"w-4 h-4 inline-block mr-1"}),n?n+" | ":"",t||"N/A"]}),s.jsx(i,{onClick:m,variant:"outline",size:"sm",className:"border-slate-600 absolute top-2 right-2",children:"Remove"})]})})}));export{d as default};
