import{c as x,r as g,u as _,j as t,i as j,L as E}from"./index-CkdKFI98.js";import{B as b}from"./button-C_VcwxQ2.js";import{S as C,m as O}from"./queries-ByOb2jVj.js";import{u as v,a as A}from"./DialogContext-D_bUabOf.js";import{E as L}from"./bulkwrapper-BIfe5AfD.js";import{u as w}from"./SessionContext-oJbdrx_W.js";import"./command-utils-CkY5cVJv.js";import"./command-meta-r_ruCnhz.js";import"./useSuspenseQuery-AkitrqQh.js";import"./useQuery-CAimMO8B.js";function F(){const e=x.c(12),o=window.location.href;let s;if(e[0]===Symbol.for("react.memo_cache_sentinel")){const p=o.split("#")[0].split("?")[1]||"";s=new URLSearchParams(p).get("code"),e[0]=s}else s=e[0];const S=s,{showDialog:d}=v(),{refetchSession:r}=w(),[n,y]=g.useState(!1),a=_();let i,l;e[1]!==n||e[2]!==a||e[3]!==r?(i=()=>{n&&(j.set("lc_token_exists",Math.random().toString(36).substring(2)),a.removeQueries({queryKey:[C.endpoint.name]}),r())},l=[n,r,a],e[1]=n,e[2]=a,e[3]=r,e[4]=i,e[5]=l):(i=e[4],l=e[5]),g.useEffect(i,l);let c;e[6]!==d?(c=p=>{d("Login Failed",t.jsxs(t.Fragment,{children:["Failed to set login OAuth2 Code. Please try again, try a different login method, or contact support.",t.jsx("div",{className:"relative overflow-auto",children:t.jsx(A,{text:p.message})})]}),!1)},e[6]=d,e[7]=c):c=e[7];const h=c;let m;e[8]===Symbol.for("react.memo_cache_sentinel")?(m={code:S??""},e[8]=m):m=e[8];let u;e[9]===Symbol.for("react.memo_cache_sentinel")?(u=p=>(y(!0),t.jsxs(t.Fragment,{children:["Logged in Successfully via OAuth2!",t.jsx("br",{}),t.jsx(b,{variant:"outline",size:"sm",className:"border-slate-600",asChild:!0,children:t.jsx(E,{to:"/home",children:"Return Home"})})]})),e[9]=u):u=e[9];let f;return e[10]!==h?(f=t.jsx(L,{endpoint:O,args:m,handle_error:h,children:u}),e[10]=h,e[11]=f):f=e[11],f}function H(){const e=x.c(1);let o;return e[0]===Symbol.for("react.memo_cache_sentinel")?(o=t.jsx(F,{}),e[0]=o):o=e[0],o}export{F as OAuth2Component,H as default};
