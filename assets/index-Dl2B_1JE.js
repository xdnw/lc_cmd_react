import{j as e,a as s,r as t,u as o,d as r,L as a}from"./index-C3IYMWuf.js";import{B as n}from"./button-ojqvaOFL.js";import{S as i,p as l}from"./endpoints-C7yNECRQ.js";import{u as m,e as u}from"./copytoclipboard-CYjqdKKr.js";import{E as d}from"./bulkwrapper-Ao1Won9N.js";import{u as c}from"./SessionContext-EI8bqMkf.js";import"./useSuspenseQuery-C4Rjs_Xf.js";import"./loading-xytKfuKY.js";import"./useQuery-DRxnS7Xn.js";function p(){const{token:p}=s(),{showDialog:j}=m(),{refetchSession:f}=c(),[g,x]=t.useState(!1),h=o();t.useEffect((()=>{g&&(r.set("lc_token_exists",Math.random().toString(36).substring(2)),h.removeQueries({queryKey:[i.endpoint.name]}),f())}),[g,f,h]);const y=t.useCallback((s=>{j("Login Failed",e.jsxs(e.Fragment,{children:["Failed to set login token. Please try again, try a different login method, or contact support.",e.jsx("div",{className:"relative overflow-auto",children:e.jsx(u,{text:s.message})})]}),!1)}),[j]);return e.jsx(d,{endpoint:l,args:{token:p??""},handle_error:y,children:({data:s})=>(x(!0),e.jsxs(e.Fragment,{children:["Logged in Successfully!",e.jsx("br",{}),e.jsx(n,{variant:"outline",size:"sm",className:"border-slate-600",asChild:!0,children:e.jsx(a,{to:"/home",children:"Return Home"})})]}))})}function j(){return e.jsx(p,{})}export{p as LoginComponent,j as default};
