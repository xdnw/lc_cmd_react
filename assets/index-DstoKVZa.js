import{c as f,u as _,g as I,j as n,L as U}from"./index-Ci-lVsFi.js";import{S as N}from"./session-DP75dZde.js";import{B as A}from"./button-CWqPuK0O.js";import{u as v,C}from"./DialogContext-ByDpcWnk.js";import{S as j,U as S}from"./queries-l4D1Q0nU.js";import{E as $}from"./bulkwrapper-CcS8ktbB.js";import{A as k}from"./apiform-DSBEjPNR.js";import"./badge-B32N61jz.js";import"./useQuery-DQk_Wp3M.js";import"./timestamp-DM9T4LEl.js";import"./command-utils-BU29VnaS.js";import"./command-meta-J_rOZp3J.js";import"./useSuspenseQuery-C2wurJin.js";import"./StateUtil-BG53k1sy.js";import"./CommandComponent-CIm2wK6D.js";import"./input-QGQmWr9A.js";import"./SimpleChart-B07JoOv1.js";import"./dropdown-menu-DLcaEqVB.js";import"./theme-provider-CM04Ee5i.js";import"./table_util-BA5kOBg_.js";import"./traditional-BV6Ghr04.js";function se(){const t=f.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-light/10 border border-light/10 p-2 relative rounded mb-4",children:n.jsx($,{endpoint:j,args:{},children:R})}),n.jsx(N,{})]}),t[0]=e):e=t[0],e}function R(t){const{data:e}=t;return n.jsx(w,{session:e})}function w(t){const e=f.c(10),{session:o}=t;if(o.nation&&o.user)if(o.registered)if(o.registered_nation??o.nation===0){let s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=n.jsx(q,{}),e[0]=s):s=e[0],s}else{let s;return e[1]!==o?(s=n.jsx(D,{session:o}),e[1]=o,e[2]=s):s=e[2],s}else{let s;return e[3]===Symbol.for("react.memo_cache_sentinel")?(s=n.jsx(E,{}),e[3]=s):s=e[3],s}else{let s;e[4]===Symbol.for("react.memo_cache_sentinel")?(s=n.jsx("h1",{className:"text-2xl font-bold",children:"You are not registered"}),e[4]=s):s=e[4];let r;e[5]!==o.nation?(r=o.nation?I():"/nation_picker",e[5]=o.nation,e[6]=r):r=e[6];const i=o.nation?"Add Discord":"Add Nation";let l;return e[7]!==r||e[8]!==i?(l=n.jsxs("div",{children:[s,n.jsx(A,{variant:"outline",size:"sm",className:"border-slate-600",asChild:!0,children:n.jsx(U,{to:r,children:i})})]}),e[7]=r,e[8]=i,e[9]=l):l=e[9],l}}function E(){const t=f.c(6),{showDialog:e}=v(),o=_();let s;t[0]!==o||t[1]!==e?(s=()=>{o.removeQueries({queryKey:[j.endpoint.name]}),e("Registered","Successfully registered your discord and nation.",!1)},t[0]=o,t[1]=e,t[2]=s):s=t[2];const r=s;let i;t[3]===Symbol.for("react.memo_cache_sentinel")?(i=n.jsxs(n.Fragment,{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Link Accounts?"}),n.jsx("p",{children:"Your discord and nation accounts are not linked. Would you like to register them?"})]}),t[3]=i):i=t[3];let l;return t[4]!==r?(l=n.jsx("div",{children:n.jsx(k,{endpoint:S,label:"Link Accounts",message:i,handle_response:r})}),t[4]=r,t[5]=l):l=t[5],l}function q(){const t=f.c(6),{showDialog:e}=v(),o=_();let s;t[0]!==o||t[1]!==e?(s=()=>{o.removeQueries({queryKey:[j.endpoint.name]}),e("Unregistered","Successfully unlinked your discord and nation. It is recommended to logout and log back in to register a new user or nation.",!1)},t[0]=o,t[1]=e,t[2]=s):s=t[2];const r=s;let i;t[3]===Symbol.for("react.memo_cache_sentinel")?(i=n.jsxs(n.Fragment,{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Already Registered"}),"You may unlink your nation from your discord user. It is recommended to logout and log back in to register a new user or nation."]}),t[3]=i):i=t[3];let l;return t[4]!==r?(l=n.jsx("div",{children:n.jsx(k,{endpoint:S,label:"Unlink Accounts",message:i,handle_response:r})}),t[4]=r,t[5]=l):l=t[5],l}function D(t){const e=f.c(20),{session:o}=t,{showDialog:s}=v(),r=_();let i;e[0]!==r||e[1]!==s?(i=()=>{r.removeQueries({queryKey:[j.endpoint.name]}),s("Unregistered","Successfully unlinked your discord and nation. It is recommended to logout and log back in to register a new user or nation.",!1)},e[0]=r,e[1]=s,e[2]=i):i=e[2];const l=i;let g;e[3]===Symbol.for("react.memo_cache_sentinel")?(g=n.jsx("h1",{className:"text-2xl font-bold",children:"Invalid Registration"}),e[3]=g):g=e[3];const y=`${o.registered_nation}`;let a;e[4]!==y?(a=n.jsx(C,{text:y}),e[4]=y,e[5]=a):a=e[5];const b=`${o.nation_name}/${o.nation}`;let c;e[6]!==b?(c=n.jsx(C,{text:b}),e[6]=b,e[7]=c):c=e[7];let d;e[8]!==a||e[9]!==c?(d=n.jsxs("p",{children:["Your discord is registered to the nation ",a,"but you are logged in as ",c]}),e[8]=a,e[9]=c,e[10]=d):d=e[10];let h;e[11]===Symbol.for("react.memo_cache_sentinel")?(h=n.jsx("p",{children:"It is recommended to either unlink your current accounts, or sign out and log back in with the correct accounts."}),e[11]=h):h=e[11];let m;e[12]!==d?(m=n.jsxs(n.Fragment,{children:[g,d,h]}),e[12]=d,e[13]=m):m=e[13];let u;e[14]!==l||e[15]!==m?(u=n.jsx(k,{endpoint:S,label:"Unlink Accounts",message:m,handle_response:l}),e[14]=l,e[15]=m,e[16]=u):u=e[16];let p;e[17]===Symbol.for("react.memo_cache_sentinel")?(p=n.jsx(A,{variant:"destructive",size:"sm",className:"h-6 px-2 bg-destructive/90 dark:bg-destructive/70 hover:bg-destructive/80 dark:hover:bg-destructive/60",asChild:!0,children:n.jsx(U,{to:"/logout",children:"Logout"})}),e[17]=p):p=e[17];let x;return e[18]!==u?(x=n.jsxs("div",{children:[u,p]}),e[18]=u,e[19]=x):x=e[19],x}export{E as RegisterComponent,w as UnregisterComponent,D as UnregisterInvalid,q as UnregisterValid,se as default};
