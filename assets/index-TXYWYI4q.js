import{j as e,L as s,g as n,u as o,r}from"./index-Bs_rCQt5.js";import{S as t}from"./session-_9ihwuvN.js";import{B as i}from"./button-BKq8Oatj.js";import{u as a,C as d}from"./DialogContext-DNjxjY9_.js";import{S as l,U as c}from"./loading-BvX06E4j.js";import{E as u}from"./bulkwrapper-Cq7hxof8.js";import{A as m}from"./apiform-DLhR_nN4.js";import"./badge-BokiBvIr.js";import"./useQuery-DFKsDxU8.js";import"./timestamp-BZb4gyXE.js";import"./useSuspenseQuery-C1sZuhyO.js";import"./StateUtil-CczZaSnY.js";import"./CommandComponent-NHjZmTrP.js";import"./input-Joq3MBUR.js";import"./SimpleChart-D6vo8Wbn.js";import"./theme-provider-DEDhC0gG.js";import"./table_util-DHwWTPFN.js";function j(){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-light/10 border border-light/10 p-2 relative rounded mb-4",children:e.jsx(u,{endpoint:l,args:{},children:({data:s})=>e.jsx(g,{session:s})})}),e.jsx(t,{})]})}function g({session:o}){return o.nation&&o.user?o.registered?o.registered_nation??0===o.nation?e.jsx(h,{}):e.jsx(p,{session:o}):e.jsx(x,{}):e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"You are not registered"}),e.jsx(i,{variant:"outline",size:"sm",className:"border-slate-600",asChild:!0,children:e.jsx(s,{to:o.nation?n():"/nation_picker",children:o.nation?"Add Discord":"Add Nation"})})]})}function x(){const{showDialog:s}=a(),n=o(),t=r.useCallback((()=>{n.removeQueries({queryKey:[l.endpoint.name]}),s("Registered","Successfully registered your discord and nation.",!1)}),[n,s]);return e.jsx("div",{children:e.jsx(m,{endpoint:c,label:"Link Accounts",message:e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Link Accounts?"}),e.jsx("p",{children:"Your discord and nation accounts are not linked. Would you like to register them?"})]}),handle_response:t})})}function h(){const{showDialog:s}=a(),n=o(),t=r.useCallback((()=>{n.removeQueries({queryKey:[l.endpoint.name]}),s("Unregistered","Successfully unlinked your discord and nation. It is recommended to logout and log back in to register a new user or nation.",!1)}),[n,s]);return e.jsx("div",{children:e.jsx(m,{endpoint:c,label:"Unlink Accounts",message:e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Already Registered"}),"You may unlink your nation from your discord user. It is recommended to logout and log back in to register a new user or nation."]}),handle_response:t})})}function p({session:n}){const{showDialog:t}=a(),u=o(),j=r.useCallback((()=>{u.removeQueries({queryKey:[l.endpoint.name]}),t("Unregistered","Successfully unlinked your discord and nation. It is recommended to logout and log back in to register a new user or nation.",!1)}),[u,t]);return e.jsxs("div",{children:[e.jsx(m,{endpoint:c,label:"Unlink Accounts",message:e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Invalid Registration"}),e.jsxs("p",{children:["Your discord is registered to the nation ",e.jsx(d,{text:`${n.registered_nation}`}),"but you are logged in as ",e.jsx(d,{text:`${n.nation_name}/${n.nation}`})]}),e.jsx("p",{children:"It is recommended to either unlink your current accounts, or sign out and log back in with the correct accounts."})]}),handle_response:j}),e.jsx(i,{variant:"outline",size:"sm",className:"border-slate-600",asChild:!0,children:e.jsx(s,{to:"/logout",children:"Logout"})})]})}export{x as RegisterComponent,g as UnregisterComponent,p as UnregisterInvalid,h as UnregisterValid,j as default};
