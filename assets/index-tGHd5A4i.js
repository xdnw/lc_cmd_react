import{c as f,u as _,g as I,j as n,L as U}from"./index-nW9DkA3u.js";import{S as N}from"./session-C-RgDdeX.js";import{B as A}from"./button-ujMD_D3S.js";import{u as v,C}from"./DialogContext-BfwqmJEN.js";import{S as j,U as S}from"./queries-B0bYDAFD.js";import{E as $}from"./bulkwrapper-CgTU9lyN.js";import{A as k}from"./apiform-Bof5oPBt.js";import"./badge-CvWKVvcB.js";import"./useQuery-fCXS6SR7.js";import"./timestamp-CoHBuXii.js";import"./command-utils-CoW9iswN.js";import"./command-meta-Dd5nXUBW.js";import"./useSuspenseQuery--1Q7REA5.js";import"./StateUtil-BU5RTinU.js";import"./ArgInput-tGvOpFqN.js";import"./input-VVMxW7J4.js";import"./MathUtil-8RZlDOhB.js";import"./table_util-BhRzU9Kk.js";import"./CommandComponent-DHq1-Tfc.js";import"./SimpleChart-BZ5w6o67.js";import"./dropdown-menu-6Z3pQS9A.js";import"./theme-provider-BEuElyuX.js";import"./traditional-D5YV84_U.js";function re(){const t=f.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-light/10 border border-light/10 p-2 relative rounded mb-4",children:n.jsx($,{endpoint:j,args:{},children:R})}),n.jsx(N,{})]}),t[0]=e):e=t[0],e}function R(t){const{data:e}=t;return n.jsx(w,{session:e})}function w(t){const e=f.c(10),{session:s}=t;if(s.nation&&s.user)if(s.registered)if(s.registered_nation??s.nation===0){let o;return e[0]===Symbol.for("react.memo_cache_sentinel")?(o=n.jsx(q,{}),e[0]=o):o=e[0],o}else{let o;return e[1]!==s?(o=n.jsx(D,{session:s}),e[1]=s,e[2]=o):o=e[2],o}else{let o;return e[3]===Symbol.for("react.memo_cache_sentinel")?(o=n.jsx(E,{}),e[3]=o):o=e[3],o}else{let o;e[4]===Symbol.for("react.memo_cache_sentinel")?(o=n.jsx("h1",{className:"text-2xl font-bold",children:"You are not registered"}),e[4]=o):o=e[4];let r;e[5]!==s.nation?(r=s.nation?I():"/nation_picker",e[5]=s.nation,e[6]=r):r=e[6];const i=s.nation?"Add Discord":"Add Nation";let l;return e[7]!==r||e[8]!==i?(l=n.jsxs("div",{children:[o,n.jsx(A,{variant:"outline",size:"sm",className:"border-slate-600",asChild:!0,children:n.jsx(U,{to:r,children:i})})]}),e[7]=r,e[8]=i,e[9]=l):l=e[9],l}}function E(){const t=f.c(6),{showDialog:e}=v(),s=_();let o;t[0]!==s||t[1]!==e?(o=()=>{s.removeQueries({queryKey:[j.endpoint.name]}),e("Registered","Successfully registered your discord and nation.",!1)},t[0]=s,t[1]=e,t[2]=o):o=t[2];const r=o;let i;t[3]===Symbol.for("react.memo_cache_sentinel")?(i=n.jsxs(n.Fragment,{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Link Accounts?"}),n.jsx("p",{children:"Your discord and nation accounts are not linked. Would you like to register them?"})]}),t[3]=i):i=t[3];let l;return t[4]!==r?(l=n.jsx("div",{children:n.jsx(k,{endpoint:S,label:"Link Accounts",message:i,handle_response:r})}),t[4]=r,t[5]=l):l=t[5],l}function q(){const t=f.c(6),{showDialog:e}=v(),s=_();let o;t[0]!==s||t[1]!==e?(o=()=>{s.removeQueries({queryKey:[j.endpoint.name]}),e("Unregistered","Successfully unlinked your discord and nation. It is recommended to logout and log back in to register a new user or nation.",!1)},t[0]=s,t[1]=e,t[2]=o):o=t[2];const r=o;let i;t[3]===Symbol.for("react.memo_cache_sentinel")?(i=n.jsxs(n.Fragment,{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Already Registered"}),"You may unlink your nation from your discord user. It is recommended to logout and log back in to register a new user or nation."]}),t[3]=i):i=t[3];let l;return t[4]!==r?(l=n.jsx("div",{children:n.jsx(k,{endpoint:S,label:"Unlink Accounts",message:i,handle_response:r})}),t[4]=r,t[5]=l):l=t[5],l}function D(t){const e=f.c(20),{session:s}=t,{showDialog:o}=v(),r=_();let i;e[0]!==r||e[1]!==o?(i=()=>{r.removeQueries({queryKey:[j.endpoint.name]}),o("Unregistered","Successfully unlinked your discord and nation. It is recommended to logout and log back in to register a new user or nation.",!1)},e[0]=r,e[1]=o,e[2]=i):i=e[2];const l=i;let g;e[3]===Symbol.for("react.memo_cache_sentinel")?(g=n.jsx("h1",{className:"text-2xl font-bold",children:"Invalid Registration"}),e[3]=g):g=e[3];const y=`${s.registered_nation}`;let a;e[4]!==y?(a=n.jsx(C,{text:y}),e[4]=y,e[5]=a):a=e[5];const b=`${s.nation_name}/${s.nation}`;let c;e[6]!==b?(c=n.jsx(C,{text:b}),e[6]=b,e[7]=c):c=e[7];let d;e[8]!==a||e[9]!==c?(d=n.jsxs("p",{children:["Your discord is registered to the nation ",a,"but you are logged in as ",c]}),e[8]=a,e[9]=c,e[10]=d):d=e[10];let h;e[11]===Symbol.for("react.memo_cache_sentinel")?(h=n.jsx("p",{children:"It is recommended to either unlink your current accounts, or sign out and log back in with the correct accounts."}),e[11]=h):h=e[11];let m;e[12]!==d?(m=n.jsxs(n.Fragment,{children:[g,d,h]}),e[12]=d,e[13]=m):m=e[13];let u;e[14]!==l||e[15]!==m?(u=n.jsx(k,{endpoint:S,label:"Unlink Accounts",message:m,handle_response:l}),e[14]=l,e[15]=m,e[16]=u):u=e[16];let p;e[17]===Symbol.for("react.memo_cache_sentinel")?(p=n.jsx(A,{variant:"destructive",size:"sm",className:"h-6 px-2 bg-destructive/90 dark:bg-destructive/70 hover:bg-destructive/80 dark:hover:bg-destructive/60",asChild:!0,children:n.jsx(U,{to:"/logout",children:"Logout"})}),e[17]=p):p=e[17];let x;return e[18]!==u?(x=n.jsxs("div",{children:[u,p]}),e[18]=u,e[19]=x):x=e[19],x}export{E as RegisterComponent,w as UnregisterComponent,D as UnregisterInvalid,q as UnregisterValid,re as default};
