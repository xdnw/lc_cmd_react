import{r as n}from"./index-Ci-lVsFi.js";function j(i,e,f,o){var E=this,c=n.useRef(null),a=n.useRef(0),s=n.useRef(0),u=n.useRef(null),v=n.useRef([]),w=n.useRef(),R=n.useRef(),T=n.useRef(i),h=n.useRef(!0),d=n.useRef(),L=n.useRef();T.current=i;var S=typeof window<"u",g=!e&&e!==0&&S;if(typeof i!="function")throw new TypeError("Expected a function");e=+e||0;var A=!!(f=f||{}).leading,F=!("trailing"in f)||!!f.trailing,x=!!f.flushOnExit&&F,p="maxWait"in f,W="debounceOnServer"in f&&!!f.debounceOnServer,O=p?Math.max(+f.maxWait||0,e):null,k=n.useMemo(function(){var l=function(r){var t=v.current,m=w.current;return v.current=w.current=null,a.current=r,s.current=s.current||r,R.current=T.current.apply(m,t)},y=function(r,t){g&&cancelAnimationFrame(u.current),u.current=g?requestAnimationFrame(r):setTimeout(r,t)},q=function(r){if(!h.current)return!1;var t=r-c.current;return!c.current||t>=e||t<0||p&&r-a.current>=O},C=function(r){return u.current=null,F&&v.current?l(r):(v.current=w.current=null,R.current)},M=function r(){var t=Date.now();if(A&&s.current===a.current&&P(),q(t))return C(t);if(h.current){var m=e-(t-c.current),D=p?Math.min(m,O-(t-a.current)):m;y(r,D)}},P=function(){o&&o({})},b=function(){if(S||W){var r,t=Date.now(),m=q(t);if(v.current=[].slice.call(arguments),w.current=E,c.current=t,x&&!d.current&&(d.current=function(){var D;((D=window.document)==null?void 0:D.visibilityState)==="hidden"&&L.current.flush()},(r=window.document)==null||r.addEventListener==null||r.addEventListener("visibilitychange",d.current)),m){if(!u.current&&h.current)return a.current=c.current,y(M,e),A?l(c.current):R.current;if(p)return y(M,e),l(c.current)}return u.current||y(M,e),R.current}};return b.cancel=function(){var r=u.current;r&&(g?cancelAnimationFrame(u.current):clearTimeout(u.current)),a.current=0,v.current=c.current=w.current=u.current=null,r&&o&&o({})},b.isPending=function(){return!!u.current},b.flush=function(){return u.current?C(Date.now()):R.current},b},[A,p,e,O,F,x,g,S,W,o]);return L.current=k,n.useEffect(function(){return h.current=!0,function(){var l;x&&L.current.flush(),d.current&&((l=window.document)==null||l.removeEventListener==null||l.removeEventListener("visibilitychange",d.current),d.current=null),h.current=!1}},[x]),k}function z(i,e){return i===e}function G(i,e,f){var o=z,E=n.useRef(i),c=n.useState({})[1],a=j(n.useCallback(function(u){E.current=u,c({})},[c]),e,f,c),s=n.useRef(i);return o(s.current,i)||(a(i),s.current=i),[E.current,a]}export{j as c,G as l};
