import{c as D,r as f,j as s,b as $,L as k}from"./index-SOjtd1du.js";import{x as P}from"./queries-BzWnpVnq.js";import{g as T,B as w}from"./button-C6_F57E5.js";import{T as R}from"./timestamp-BafVWTh4.js";import{E as B}from"./bulkwrapper-CSppeL3K.js";import{h as L}from"./table_util-BV1C7Yj5.js";import{D as O}from"./DataTable-CoJvVKo_.js";function I(a){const e=D.c(13),{columns:r,data:o,renderers:n,sort:b}=a,h=f.useRef(null);let l,t;e[0]!==r.length?(t=Array.from(Array(r.length).keys()),e[0]=r.length,e[1]=t):t=e[1],l=t;const p=l;let S,d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=new Set,e[2]=d):d=e[2],S=d;const y=S,[x,_]=f.useState(o);let m;if(e[3]!==r||e[4]!==n){let u;e[6]!==n?(u=(E,j)=>({title:E,index:j,render:n&&n[j]?L(n[j]):void 0}),e[6]=n,e[7]=u):u=e[7],m=r.map(u),e[3]=r,e[4]=n,e[5]=m}else m=e[5];const[N,A]=f.useState(m),[g,C]=f.useState(b);let v,c;return e[8]!==N||e[9]!==x||e[10]!==g||e[11]!==p?(c=s.jsx(O,{table:h,data:x,columnsInfo:N,sort:g,searchSet:y,visibleColumns:p,setColumns:A,setData:_,setSort:C,showExports:!0}),e[8]=N,e[9]=x,e[10]=g,e[11]=p,e[12]=c):c=e[12],v=c,v}function i(a,e,r,o,n){return a==0?"None":a==-1?"N/A":(e||(e=r+":"+a),r=="nation"&&o&&(e="&#x3C;&#x3C;BANNED&#x3E;&#x3E; "+e),n===void 0?`[${e}](https://politicsandwar.com/${r}/id=${a})`:`[${e}](/#/${n}/${a})`)}function M(){const a=D.c(3),{nation:e}=$();let r;a[0]===Symbol.for("react.memo_cache_sentinel")?(r=T().get("update")??"false",a[0]=r):r=a[0];let o;return a[1]!==e?(o=s.jsx(B,{endpoint:P,args:{nation:e,forceUpdate:r},children:U}),a[1]=e,a[2]=o):o=a[2],o}function U(a){const{data:e}=a,r=["ID","Last Access From Shared IP","Number Of Shared IPs","Last Active Ms","Alliance ID","Date Created"],o=["normal","time_ms","comma","time_ms","normal","time_ms"],n=Object.values(e.network).map(t=>[i(t.id,e.nationNames[t.id]??t.id,"nation",e.bans[t.id],"multi"),t.lastAccessFromSharedIP,t.numberOfSharedIPs,t.lastActiveMs,i(t.allianceId,e.allianceNames[t.allianceId]??t.allianceId,"alliance",void 0,void 0),t.dateCreated]),b=["Selling Nation","Buying Nation","Date Offered","Resource","Amount","PPU"],h=["normal","normal","time_ms",void 0,"comma","comma"],l=e.trade.map(t=>[i(t.sellingNation,e.nationNames[t.sellingNation]??t.sellingNation,"nation",e.bans[t.sellingNation]),i(t.buyingNation,e.nationNames[t.buyingNation]??t.buyingNation,"nation",e.bans[t.buyingNation]),t.dateOffered,t.resource,t.amount,t.ppu]);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 shadow-sm",children:["Multi Buster info for: ",s.jsx("a",{href:`https://politicsandwar.com/nation/id=${e.nationId}`,children:e.nationNames[e.nationId]??e.nationId}),s.jsx("br",{}),"Last updated: ",s.jsx(R,{millis:e.dateFetched}),s.jsx("hr",{className:"my-2 border-border"}),e.dateFetched<Date.now()-864e5&&s.jsx(w,{variant:"outline",size:"sm",asChild:!0,children:s.jsx(k,{to:"?update=true",children:"Update"})})]}),s.jsxs("div",{className:"bg-card border border-border rounded-lg shadow-sm overflow-hidden mt-4",children:[s.jsx("h2",{className:"text-xl font-semibold w-full border-b border-border px-4 py-2 bg-muted/50",children:"Shared Networks (Unique IDs)"}),s.jsx("div",{className:"p-4",children:s.jsx(I,{columns:r,data:n,renderers:o,sort:{idx:3,dir:"desc"}})})]}),s.jsxs("div",{className:"bg-card border border-border rounded-lg shadow-sm overflow-hidden mt-4",children:[s.jsx("h2",{className:"text-xl font-semibold w-full border-b border-border px-4 py-2 bg-muted/50",children:"Same Network Trades"}),s.jsx("div",{className:"p-4",children:s.jsx(I,{columns:b,data:l,renderers:h})})]})]})}const J=Object.freeze(Object.defineProperty({__proto__:null,default:M,renderLink:i},Symbol.toStringTag,{value:"Module"}));export{I as T,J as m,i as r};
