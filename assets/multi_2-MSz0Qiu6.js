import{c as q,b as G,e as H,d as J,R as K,r as Q,j as t,L as X}from"./index-nW9DkA3u.js";import{w as O,L as $}from"./queries-B0bYDAFD.js";import{B as W}from"./button-ujMD_D3S.js";import{r as C,T as M}from"./multi-eix9sMN2.js";import{E as Z}from"./bulkwrapper-CgTU9lyN.js";import{A as ee}from"./ArgInput-tGvOpFqN.js";import{u as te}from"./StateUtil-BU5RTinU.js";import"./command-utils-CoW9iswN.js";import"./command-meta-Dd5nXUBW.js";import"./timestamp-CoHBuXii.js";import"./DialogContext-BfwqmJEN.js";import"./table_util-BhRzU9Kk.js";import"./DataTable-CrC93K72.js";import"./dropdown-menu-6Z3pQS9A.js";import"./useSuspenseQuery--1Q7REA5.js";import"./input-VVMxW7J4.js";import"./MathUtil-8RZlDOhB.js";function _e(){const e=q.c(41),{nation:n}=G(),f=H(),u=J(),[A,s]=te(n??""),[r,P]=K.useState(!0);let g,j;e[0]!==n||e[1]!==s?(g=()=>{n&&s(x=>x!==n?n:x)},j=[n,s],e[0]=n,e[1]=s,e[2]=g,e[3]=j):(g=e[2],j=e[3]),Q.useEffect(g,j);let F,b;e[4]!==u.search?(b=new URLSearchParams(u.search).get("update")??"false",e[4]=u.search,e[5]=b):b=e[5],F=b;const v=F,i=n??A;let N;e[6]!==n||e[7]!==f||e[8]!==s?(N=x=>{const a=x.trim();a&&(s(w=>w!==a?a:w),a!==n&&f(`/multi_v2/${encodeURIComponent(a)}`))},e[6]=n,e[7]=f,e[8]=s,e[9]=N):N=e[9];const T=N;let _;e[10]!==T?(_=(x,a)=>{T(a)},e[10]=T,e[11]=_):_=e[11];const R=_;let V;const z=`${i?"text-primary/80 border-secondary":"text-red-500 border-red-500/25"} border w-full mb-2 p-1 relative bg-accent rounded`;let o;e[12]!==i?(o=i?t.jsxs(t.Fragment,{children:["Currently selected: ",i]}):t.jsx(t.Fragment,{children:"You must select a nation to generate the report."}),e[12]=i,e[13]=o):o=e[13];let l;e[14]!==z||e[15]!==o?(l=t.jsx("div",{className:z,children:o}),e[14]=z,e[15]=o,e[16]=l):l=e[16];let y;e[17]===Symbol.for("react.memo_cache_sentinel")?(y=O.endpoint.args.nation.getTypeBreakdown(),e[17]=y):y=e[17];const E=i??"";let d;e[18]!==R||e[19]!==E?(d=t.jsx(ee,{argName:"nation",breakdown:y,initialValue:E,setOutputValue:R}),e[18]=R,e[19]=E,e[20]=d):d=e[20];let I;e[21]!==d||e[22]!==l?(I=t.jsxs("div",{className:"mb-2 bg-light/10 border border-light/10 p-2 rounded",children:[l,d]}),e[21]=d,e[22]=l,e[23]=I):I=e[23],V=I;const U=V;let D;e[24]===Symbol.for("react.memo_cache_sentinel")?(D=()=>{P(se)},e[24]=D):D=e[24];const Y=D;let c;e[25]!==r?(c=t.jsxs(W,{variant:"ghost",size:"md",className:"text-2xl w-full border-b border-secondary px-2 bg-primary/10 justify-start",onClick:Y,children:["Column descriptions ",r?t.jsx($,{name:"ChevronDown"}):t.jsx($,{name:"ChevronUp"})]}),e[25]=r,e[26]=c):c=e[26];const B=`transition-all duration-200 ease-in-out ${r?"max-h-0 opacity-0 overflow-hidden":"p-2 opacity-100"}`;let L,S;e[27]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsxs("ul",{className:"p-2",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Nation"}),": The name of the nation."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Alliance"}),": The name of the alliance the nation belongs to."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Age"}),": The age of the nation in days."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Cities"}),": The number of cities in the nation."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Shared IPs"}),": The number of shared IP addresses between the two nations."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Shared IP %"}),": Percent of nations in both multi reports that are the same (weighted by IP)."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Shared Nation %"}),": Percent of nations in both multi reports that are the same."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Same IP"}),": Last login used the same IP address."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Banned"}),": Indicates if the nation is banned."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Login Diff"}),": The time difference between their last logins."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Same Activity %"}),": The percentage turns both are active within the past 2 weeks."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"% Online"}),": The percentage of turns the nation is active in general within the past 2w."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Discord"}),": The Discord handle of the nation (may be blank even if they have verified in the past)"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Discord Linked"}),": Indicates if the Discord account is linked with this bot."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"IRL Verified"}),": Indicates if the nation is verified their IRL identity."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Customization"}),": The amount of basic customization done to the nation (such as flag)."]})]}),S=t.jsx("p",{className:"p-2 bg-primary/20",children:"If the shared % says N/A, it means the nation has not been checked for shared IPs. You can try loading the multi page for that nation, then refreshing this page."}),e[27]=L,e[28]=S):(L=e[27],S=e[28]);let h;e[29]!==B?(h=t.jsxs("div",{className:B,children:[L,S]}),e[29]=B,e[30]=h):h=e[30];let m;e[31]!==c||e[32]!==h?(m=t.jsxs("div",{className:"bg-light/10 border border-light/10 mb-2 rounded",children:[c,h]}),e[31]=c,e[32]=h,e[33]=m):m=e[33];let p;e[34]!==i||e[35]!==v?(p=i&&t.jsx(Z,{endpoint:O,args:{nation:i,forceUpdate:v},children:ne},`${i}:${v}`),e[34]=i,e[35]=v,e[36]=p):p=e[36];let k;return e[37]!==U||e[38]!==m||e[39]!==p?(k=t.jsxs(t.Fragment,{children:[U,m,p]}),e[37]=U,e[38]=m,e[39]=p,e[40]=k):k=e[40],k}function ne(e){const{data:n}=e,f=["Nation","Alliance","Age","Cities","Last Active","% Online","Discord","Discord Linked","IRL Verified","Customization","Updated"],u=[[C(n.nationId,n.nation,"nation",n.banned?"BANNED":void 0,void 0),C(n.allianceId,n.alliance,"alliance",void 0,void 0),n.age,n.cities,n.lastActive,n.percentOnline,n.discord,n.discord_linked,n.irl_verified,n.customization,n.dateFetched]],A=["normal","normal","duration_day","comma","diff_ms","percent","normal","normal","normal","percent_100","diff_ms"],s=["Nation","Alliance","Age","Cities","Shared IPs","Shared IP %","Shared Nation %","Same IP","Banned","Login Diff","Same Activity %","% Online","Discord","Discord Linked","IRL Verified","Customization"],r=n.rows.map(ie),P=["normal","normal","duration_day","comma","comma","percent","percent","normal","normal","duration_ms","percent","percent","normal","normal","normal","percent_100"];return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-light/10 border border-light/10 p-2",children:[t.jsx(M,{columns:f,data:u,renderers:A}),t.jsx("hr",{className:"my-1"}),n.dateFetched<Date.now()-864e5&&t.jsx(W,{variant:"outline",size:"sm",className:"border-red-800/70",asChild:!0,children:t.jsx(X,{to:"?update=true",children:"Update"})})]}),t.jsx("hr",{className:"my-2"}),t.jsxs("div",{className:"bg-light/10 border border-light/10 rounded-t",children:[t.jsx("h2",{className:"text-2xl w-full border-b border-secondary px-2 bg-primary/10",children:"Shared Networks (Unique IDs)"}),t.jsx("div",{className:"p-2",children:t.jsx(M,{columns:s,data:r,renderers:P,sort:{idx:5,dir:"desc"}})})]})]})}function ie(e){return[C(e.id,e.Nation,"nation",e.banned?"BANNED":void 0,"multi_v2"),C(e.alliance_id,e.alliance,"alliance",void 0,void 0),e.age,e.cities,e.shared_ips,e.shared_percent,e.shared_nation_percent,e.same_ip,e.banned?"true":"",e.login_diff,e.same_activity_percent,e.percentOnline,e.discord,e.discord_linked,e.irl_verified,e.customization]}function se(e){return!e}export{_e as default};
