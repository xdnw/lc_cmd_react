import{c as h,j as e,L as g,a as w,d as S,r as u,h as k,R as _}from"./index-CkdKFI98.js";import{u as L,T}from"./theme-provider-DEyqfEv0.js";import{D as b,b as p,c as N,a as x}from"./dropdown-menu-BREEIaC2.js";import{B as y}from"./button-C_VcwxQ2.js";import{L as f,b as D,S as I,X as M}from"./queries-ByOb2jVj.js";import{u as $}from"./useQuery-CAimMO8B.js";import{I as C}from"./input-CfYBFoRI.js";import{D as P}from"./DialogContext-D_bUabOf.js";import{S as z}from"./SessionContext-oJbdrx_W.js";import"./command-utils-CkY5cVJv.js";import"./command-meta-r_ruCnhz.js";function E(){const s=h.c(5),{setTheme:t}=L();let r;s[0]!==t?(r=o=>{const i=o.currentTarget.getAttribute("data-key");try{return t(i),new Promise(R)}catch{}},s[0]=t,s[1]=r):r=s[1];const a=r;let n;s[2]===Symbol.for("react.memo_cache_sentinel")?(n=e.jsx(b,{asChild:!0,children:e.jsxs(y,{variant:"ghost",size:"iconSm",className:"rounded-md [&_svg]:size-3.5 text-muted-foreground hover:text-foreground",children:[e.jsx(f,{name:"Sun",className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(f,{name:"Moon",className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),e.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),s[2]=n):n=s[2];let l;return s[3]!==a?(l=e.jsxs(p,{children:[n,e.jsxs(N,{align:"end",children:[e.jsx(x,{"data-key":"light",onClick:a,children:"Light"}),e.jsx(x,{"data-key":"dark",onClick:a,children:"Dark"}),e.jsx(x,{"data-key":"system",onClick:a,children:"System"})]})]}),s[3]=a,s[4]=l):l=s[4],l}function R(s){setTimeout(()=>s(),100)}function v(){const s=h.c(2);let t;s[0]===Symbol.for("react.memo_cache_sentinel")?(t=e.jsx(b,{asChild:!0,children:e.jsxs(y,{variant:"ghost",size:"iconSm",className:"rounded-md [&_svg]:size-3.5 text-muted-foreground hover:text-foreground",children:[e.jsx(f,{name:"Settings",className:"h-[1rem] w-[1rem] rotate-0 scale-100 transition-all"}),e.jsx("span",{className:"sr-only",children:"Profile menu"})]})}),s[0]=t):t=s[0];let r;return s[1]===Symbol.for("react.memo_cache_sentinel")?(r=e.jsxs(p,{children:[t,e.jsx(N,{align:"end",children:e.jsx(x,{children:e.jsx(g,{to:"/login",className:"w-full",children:"Login"})})})]}),s[1]=r):r=s[1],r}function B(){const s=h.c(11);let t;s[0]===Symbol.for("react.memo_cache_sentinel")?(t=D(I.endpoint,{}),s[0]=t):t=s[0];const{data:r,isFetching:a}=$(t);if(a||!r){let d;return s[1]===Symbol.for("react.memo_cache_sentinel")?(d=e.jsx(w,{variant:"ripple"}),s[1]=d):d=s[1],d}if(!r.data){let d;return s[2]===Symbol.for("react.memo_cache_sentinel")?(d=e.jsx(v,{}),s[2]=d):d=s[2],d}const n=r.data;let l;s[3]===Symbol.for("react.memo_cache_sentinel")?(l=e.jsx(b,{asChild:!0,children:e.jsxs(y,{variant:"ghost",size:"iconSm",className:"rounded-md [&_svg]:size-3.5 text-muted-foreground hover:text-foreground",children:[e.jsx(f,{name:"Settings",className:"h-[1rem] w-[1rem] rotate-0 scale-100 transition-all"}),e.jsx("span",{className:"sr-only",children:"Profile Menu"})]})}),s[3]=l):l=s[3];let o;s[4]!==n?(o=n.guild?e.jsx(G,{session:n}):"Select Guild",s[4]=n,s[5]=o):o=s[5];let i;s[6]!==o?(i=e.jsx(x,{children:e.jsx(g,{className:"w-full",to:"/guild_select",children:o})}),s[6]=o,s[7]=i):i=s[7];let c;s[8]===Symbol.for("react.memo_cache_sentinel")?(c=e.jsx(x,{children:e.jsx(g,{to:"/logout",className:"w-full",children:"Logout"})}),s[8]=c):c=s[8];let j;return s[9]!==i?(j=e.jsxs(p,{children:[l,e.jsxs(N,{align:"end",children:[i,c]})]}),s[9]=i,s[10]=j):j=s[10],j}function G(s){const t=h.c(6),{session:r}=s;let a;t[0]!==r.guild_icon||t[1]!==r.guild_name?(a=r.guild_icon&&e.jsx("img",{src:r.guild_icon,alt:r.guild_name,className:"w-4 h-4 inline-block mr-1"}),t[0]=r.guild_icon,t[1]=r.guild_name,t[2]=a):a=t[2];const n=r.guild_name?r.guild_name:"guild:"+r.guild;let l;return t[3]!==a||t[4]!==n?(l=e.jsxs(e.Fragment,{children:[a,n]}),t[3]=a,t[4]=n,t[5]=l):l=t[5],l}const O=_.memo(()=>{const s=h.c(2);let t;s[0]===Symbol.for("react.memo_cache_sentinel")?(t=e.jsx(C,{id:"navbar-search",className:"relative w-full rounded-r-none border-r-0 px-2 h-7",type:"search",placeholder:"Search pages...","aria-label":"Search",name:"term"}),s[0]=t):t=s[0];let r;return s[1]===Symbol.for("react.memo_cache_sentinel")?(r=e.jsxs("div",{className:"w-full p-0 flex items-center",children:[t,e.jsx("button",{type:"submit",className:"bg-secondary text-secondary-foreground hover:bg-secondary/80 px-2 h-7 rounded-r border border-input border-l-0 flex items-center justify-center",children:e.jsx(f,{name:"Search",size:14})})]}),s[1]=r):r=s[1],r});function F(){const s=S(),t=u.useMemo(()=>decodeURI(s.pathname).split("/").filter(o=>o),[s.pathname]),r=u.useMemo(()=>k(),[]),a=u.useMemo(()=>t.length===0?e.jsx("span",{children:"Home"}):e.jsxs(e.Fragment,{children:[e.jsx(g,{to:"/",className:"text-primary hover:text-primary/80 underline",children:"[index]"}),t.map((o,i)=>{const c=`/${t.slice(0,i+1).join("/")}`;return e.jsxs(_.Fragment,{children:[e.jsx("span",{className:"mx-1",children:"/"}),e.jsx(g,{to:c,className:"text-primary hover:text-primary/80 underline",children:o})]},c)})]}),[t]),n=u.useMemo(()=>r?e.jsx(B,{}):e.jsx(v,{}),[r]),l=u.useMemo(()=>e.jsx(E,{}),[]);return e.jsxs("nav",{className:"bg-card border-b border-border flex flex-row items-center px-2 py-1 gap-1.5 shadow-sm",children:[e.jsx("div",{className:"flex-none",children:l}),e.jsx("div",{className:"flex-none",children:e.jsx("div",{className:"inline-flex max-w-[42vw] md:max-w-136 overflow-hidden text-ellipsis text-xs h-7 px-2 bg-muted text-muted-foreground rounded items-center justify-center whitespace-nowrap",children:a})}),e.jsx("div",{className:"grow",children:e.jsx(O,{})}),e.jsx("div",{className:"flex-none relative",children:n})]})}const m=u.memo(s=>{const t=h.c(6),{href:r,iconName:a,label:n}=s;let l;t[0]!==a?(l=e.jsx(f,{name:a,size:16,fallback:M}),t[0]=a,t[1]=l):l=t[1];let o;return t[2]!==r||t[3]!==n||t[4]!==l?(o=e.jsx("li",{className:"mb-2",children:e.jsxs("a",{href:r,className:"text-muted-foreground hover:text-foreground transition-colors flex items-center gap-2 text-sm",children:[l,n]})}),t[2]=r,t[3]=n,t[4]=l,t[5]=o):o=t[5],o});function U(){const s=h.c(6);let t;s[0]===Symbol.for("react.memo_cache_sentinel")?(t=e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("img",{src:"https://cdn.discordapp.com/avatars/672237266940198960/0d78b819d401a8f983ab16242de195da.webp",className:"rounded-full",alt:"Logo",width:"24",height:"24"}),e.jsx("h5",{className:"font-semibold text-sm mb-3",children:"Locutus"})]}),s[0]=t):t=s[0];let r,a;s[1]===Symbol.for("react.memo_cache_sentinel")?(r=e.jsxs("div",{children:[t,e.jsxs("ul",{className:"list-none space-y-2",children:[e.jsx(m,{href:"https://github.com/xdnw/locutus",iconName:"GitPullRequest",label:"Source Code"}),e.jsx(m,{href:"https://github.com/xdnw/locutus/wiki",iconName:"BookOpenText",label:"Wiki"}),e.jsx(m,{href:"https://locutus.link:8443/job/locutus/",iconName:"Infinity",label:"Jenkins"})]})]}),a=e.jsx("h5",{className:"font-semibold text-sm mb-2",children:"Get in Touch"}),s[1]=r,s[2]=a):(r=s[1],a=s[2]);let n,l;s[3]===Symbol.for("react.memo_cache_sentinel")?(n=e.jsxs("div",{children:[a,e.jsxs("ul",{className:"list-none space-y-2",children:[e.jsx(m,{href:"https://github.com/xdnw/locutus/issues",iconName:"Github",label:"Issue Tracker"}),e.jsx(m,{href:"https://discord.gg/cUuskPDrB7",iconName:"MessageSquareText",label:"Discord Server"}),e.jsx(m,{href:"discord://discord.com/users/664156861033086987",iconName:"CircleUserRound",label:"Discord User"}),e.jsx(m,{href:"https://politicsandwar.com/nation/id=189573",iconName:"Joystick",label:"In-Game"}),e.jsx(m,{href:"mailto:jessepaleg@gmail.com",iconName:"AtSign",label:"Email"})]})]}),l=e.jsx("h5",{className:"font-semibold text-sm mb-2",children:"Legal"}),s[3]=n,s[4]=l):(n=s[3],l=s[4]);let o;return s[5]===Symbol.for("react.memo_cache_sentinel")?(o=e.jsx("footer",{className:"border-t border-border mt-2 py-3 bg-card text-card-foreground",children:e.jsx("div",{className:"w-full px-2 md:px-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r,n,e.jsxs("div",{children:[l,e.jsxs("ul",{className:"list-none space-y-2",children:[e.jsx(m,{href:"https://github.com/xdnw/locutus/blob/master/LICENSE",iconName:"ListX",label:"License"}),e.jsx(m,{href:"https://github.com/xdnw/locutus/blob/master/ToS.MD",iconName:"ListChecks",label:"Terms Of Service"}),e.jsx(m,{href:"https://github.com/xdnw/locutus/blob/master/PRIVACY.MD",iconName:"EyeOff",label:"Privacy Policy"}),e.jsx(m,{href:"https://github.com/xdnw/locutus/blob/master/SECURITY.md",iconName:"Bug",label:"Vulnerability Disclosure"})]})]})]})})}),s[5]=o):o=s[5],o}function ee(s){const t=h.c(6),{children:r}=s;let a,n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=e.jsx(F,{}),t[0]=n):n=t[0],a=n;const l=a;let o;t[1]!==r?(o=e.jsx("main",{className:"grow w-full px-2 py-1.5 md:px-3 md:py-2 space-y-1.5",children:r}),t[1]=r,t[2]=o):o=t[2];let i;t[3]===Symbol.for("react.memo_cache_sentinel")?(i=e.jsx(U,{}),t[3]=i):i=t[3];let c;return t[4]!==o?(c=e.jsx(P,{children:e.jsx(z,{children:e.jsx(T,{defaultTheme:"dark",storageKey:"vite-ui-theme",children:e.jsxs("div",{className:"min-h-screen bg-background text-foreground flex flex-col",children:[l,o,i]})})})}),t[4]=o,t[5]=c):c=t[5],c}export{ee as default};
